<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  <title>oracle数据库操作 | 日常点滴</title>
  <meta name="description" content="" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="stylesheet" type="text/css" href="/css/screen.css" />
  <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Noto+Serif:400,700,400italic|Open+Sans:700,400" />

  <meta name="generator" content="日常点滴">

  
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/rss.xml">
  
  
  <link rel="alternate" type="application/atom+xml" title="Atom 0.3" href="rss.xml">
  
  

  
</head>


<body class="post-template">

  <header class="site-head"  style="background-image: url(/hexo/image/cover.jpg)" >
    <div class="vertical">
        <div class="site-head-content inner">
             <a class="blog-logo" href="/"><img src="https://avatars.githubusercontent.com/u/26755276" alt="Blog Logo"/></a> 
            <h1 class="blog-title">日常点滴</h1>
            <h2 class="blog-description"></h2>
        </div>
    </div>
</header>
  

<main class="content" role="main">
  <article class="post">
    <span class="post-meta">
      <time datetime="2018-05-15T16:00:00.000Z" itemprop="datePublished">
          2018-05-16
      </time>
    
    
    | 
    <a href='/tags/oracle/'>oracle</a>
    
    
</span>
    <h1 class="post-title">oracle数据库操作</h1>
    <section class="post-content">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css" /><h1>前言</h1>
<p>感觉oracle使用时较mysql麻烦不少，记录一下学到的操作方法</p>
<a id="more"></a>
<h1>操作</h1>
<ol>
<li>获取实例名</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select instance_name from V<span class="variable">$instance</span>;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>获取数据库名</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select name from V<span class="variable">$database</span>;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>创建表空间</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">create tablespace 表空间名</span><br><span class="line">logging</span><br><span class="line">datafile 文件路径</span><br><span class="line">size 100m</span><br><span class="line">autoextend on</span><br><span class="line">next 10m</span><br><span class="line">maxsize unlimited</span><br><span class="line">extent management <span class="built_in">local</span></span><br></pre></td></tr></table></figure>
<p>其中logging代表创建重做日志，具体意思目前不明，可不填<br>
extent management local代表创建本地管理表空间，具体意义不明，可不填<br>
datafile path代表表空间文件存放路径<br>
size文件大小<br>
autoextend on开启自动扩展空间功能<br>
maxsize unlimited最大大小不限<br>
next 10m扩展大小10m<br>
4.  删除表空间</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop tablespace 表空间名 including contents and datafiles;</span><br></pre></td></tr></table></figure>
<p>contents表示内容，表空间不为空时必须添加。<br>
datafiles表示表空间文件。</p>
<ol start="5">
<li>获取表空间信息</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select 信息名 from dba_tablespaces;</span><br></pre></td></tr></table></figure>
<ol start="6">
<li>创建表</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create table 表名(变量名 类型,变量名 类型);</span><br></pre></td></tr></table></figure>
<p>可选参数</p>
<table>
<thead>
<tr>
<th style="text-align:center">参数</th>
<th style="text-align:left">作用</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">primary key</td>
<td style="text-align:left">设为主键</td>
</tr>
<tr>
<td style="text-align:center">unique</td>
<td style="text-align:left">不可重复</td>
</tr>
<tr>
<td style="text-align:center">not null</td>
<td style="text-align:left">不可为空</td>
</tr>
<tr>
<td style="text-align:center">default ‘value’</td>
<td style="text-align:left">默认值为value</td>
</tr>
<tr>
<td style="text-align:center">references table(name)</td>
<td style="text-align:left">设为对应table表中name字段的外键</td>
</tr>
<tr>
<td style="text-align:center">tablespace name</td>
<td style="text-align:left">指定表创建在哪个表空间下，若不选，则创建在用户默认表空间下</td>
</tr>
</tbody>
</table>
<p>例子</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create table mytable(</span><br><span class="line">id varchar(10) not null primary key,</span><br><span class="line">describe varchar(20),</span><br><span class="line">state number(1) not null default 1</span><br><span class="line">) tablespace mytablespace;</span><br></pre></td></tr></table></figure>
<ol start="7">
<li>获取表信息</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select 信息名 from dba_tables;</span><br></pre></td></tr></table></figure>
<ol start="8">
<li>删除表</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop table 表名</span><br></pre></td></tr></table></figure>
<ol start="9">
<li>修改表字段信息</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">alter table 表名 要做的操作</span><br><span class="line">//例如，添加外键依赖</span><br><span class="line">alter table mytable</span><br><span class="line">add constraint your_fk_name foreign key(name)</span><br><span class="line">references an_other_table(an_other_name);</span><br><span class="line">//添加主键依赖</span><br><span class="line">later table mytable</span><br><span class="line">add constraint you_pk_name primary key(name);</span><br></pre></td></tr></table></figure>
<ol start="10">
<li>获取用户信息</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select 用户信息 from dba_users;</span><br></pre></td></tr></table></figure>
<ol start="11">
<li>获取表的字段名</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select t.column_name from user_tab_columns t <span class="built_in">where</span> t.tale_name=<span class="string">'表名'</span>;</span><br></pre></td></tr></table></figure>
<ol start="12">
<li>创建用户并指定表空间</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create user UserName identified by Password</span><br><span class="line">default tablespace t</span><br><span class="line">temporary tablespace t;</span><br><span class="line">-- 指定</span><br><span class="line">alter user UserName temporary tablespace t;</span><br></pre></td></tr></table></figure>
<ol start="13">
<li>表空间里存放了哪些用户的数据：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select distinct owner,tablespace_name from dba_segments;</span><br></pre></td></tr></table></figure>

    </section>
    <footer class="post-footer">
      <section class="author">
    <h4>flyingfisherman</h4>
    <p>前端工程师，热爱技术，坚信知识技术改变生活。最高兴的场合莫过于学到的技术为自己、亲友或他人提供了些许的便利、帮助。</p>
</section>
      <section class="share">
    <h4>Share this post</h4>
    <a class="icon-twitter" href="http://twitter.com/share?url=https://github.flyingfishman.io/2018/05/16/oracle2/"
       onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
        <span class="hidden">Twitter</span>
    </a>
    <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://github.flyingfishman.io/2018/05/16/oracle2/"
       onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
        <span class="hidden">Facebook</span>
    </a>
    <a class="icon-google-plus" href="https://plus.google.com/share?url=https://github.flyingfishman.io/2018/05/16/oracle2/"
       onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
        <span class="hidden">Google+</span>
    </a>
</section>
    </footer>
  </article>
  <nav class="pagination" role="pagination">
    
    <a class="newer-posts" href="/2018/05/19/webpack/">
        ← webpack的使用
    </a>
    
    <span class="page-number">•</span>
    
    <a class="older-posts" href="/2018/05/13/oracle/">
        oracle中创建数据库 →
    </a>
    
</nav>
  <div id="comment" class="comments-area">
    <h1 class="title"><a href="#disqus_comments" name="disqus_comments">Comments</a></h1>

    
</div>
</main>


  
<footer class="site-footer">
  
  <a class="subscribe icon-feed" href="/rss.xml"><span class="tooltip">Subscribe!</span></a>
  
  <div class="inner">
     <section class="copyright">All content copyright <a href="/">日常点滴</a> &copy; 2014 &bull; All rights reserved.</section>
     <section class="poweredby">Proudly published with <a class="icon-ghost" href="http://zespia.tw/hexo/">Hexo</a></section>
  </div>
</footer>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

<script type="text/javascript" src="/js/jquery.fitvids.js"></script>
<script type="text/javascript" src="/js/index.js"></script>






</body>
</html>
