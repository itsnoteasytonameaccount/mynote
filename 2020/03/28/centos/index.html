<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  <title>centos各环境安装 | 土壤细流</title>
  <meta name="description" content="" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="stylesheet" type="text/css" href="/mynote/css/screen.css" />
  <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Noto+Serif:400,700,400italic|Open+Sans:700,400" />

  <meta name="generator" content="土壤细流">

  
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/rss.xml">
  
  
  <link rel="alternate" type="application/atom+xml" title="Atom 0.3" href="rss.xml">
  
  

  
</head>


<body class="post-template">

  <header class="site-head"  style="background-image: url(/mynote/image/cover.jpg)" >
    <div class="vertical">
        <div class="site-head-content inner">
             <a class="blog-logo" href="/mynote/"><img src="https://avatars.githubusercontent.com/u/26755276" alt="Blog Logo"/></a> 
            <h1 class="blog-title">土壤细流</h1>
            <h2 class="blog-description"></h2>
        </div>
    </div>
</header>
  

<main class="content" role="main">
  <article class="post">
    <span class="post-meta">
      <time datetime="2020-03-27T16:00:00.000Z" itemprop="datePublished">
          2020-03-28
      </time>
    
    
    | 
    <a href='/mynote/tags/linux/'>linux</a>,
    
    <a href='/mynote/tags/centos/'>centos</a>,
    
    <a href='/mynote/tags/nginx/'>nginx</a>
    
    
</span>
    <h1 class="post-title">centos各环境安装</h1>
    <section class="post-content">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css" /><h1>前言</h1>
<p>装虚拟机，租服务器，帮同学朋友弄东西,每次都要重复一些步骤，每次都觉得有经验了，但每次都一堆问题，令人沮丧，总结记一记或许能好些<br>
<a href="https://cloud.tencent.com/document/product/213/38056" target="_blank" rel="noopener">这里有一份腾讯云的文档</a></p>
<a id="more"></a>
<h1>mysql</h1>
<p>本文中安装的是mysql8<br>
centos默认装了mariadb，但用习惯了mysql，并且水平差只会用Mysql<br>
上mysql官网找到MySQL官方的 Yum Repository地址,rpm包，用wget下载并安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下对应centos版本的仓库，否则会出问题</span></span><br><span class="line"><span class="comment"># 可以用uname -a查看自己centos版本</span></span><br><span class="line">wget https://dev.mysql.com/get/mysql80-community-release-el7-1.noarch.rpm</span><br><span class="line">yum install mysql80-community-release-el7-1.noarch.rpm <span class="comment">#或rpm -i mysql80-community-release-el8-1.noarch.rpm</span></span><br></pre></td></tr></table></figure>
<p>或直接</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 可选加-v输出细节，-h安装时打印文件的hash值</span></span><br><span class="line">rpm -i https://dev.mysql.com/get/mysql80-community-release-el7-1.noarch.rpm</span><br></pre></td></tr></table></figure>
<p>接着</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install mysql-community-server</span><br></pre></td></tr></table></figure>
<p>安装后会生成一个默认的配置文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 可以用如下命令找出</span></span><br><span class="line">find / -name my.cnf</span><br><span class="line"><span class="comment"># 也可以用如下命令查看配置文件的搜索路径</span></span><br><span class="line">mysql --verbose --<span class="built_in">help</span></span><br></pre></td></tr></table></figure>
<p>配置文件中给了<a href="http://dev.mysql.com/doc/refman/8.0/en/server-configuration-defaults.html" target="_blank" rel="noopener">官方配置建议的网址</a><br>
mysql8和mysql5.7默认的用户密码加密方式有点区别,可以通过配置设置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">default-authentication-plugin = mysql_native_password</span><br><span class="line"><span class="comment"># 默认拒绝用root用户启动，在此指定用户</span></span><br><span class="line">user = mysql</span><br><span class="line"><span class="comment"># 设置报错输出路径,不设置时默认路径如下</span></span><br><span class="line"><span class="built_in">log</span>-error = /var/<span class="built_in">log</span>/mysqld.log</span><br><span class="line"><span class="comment"># 跳过验证，忘记密码时使用</span></span><br><span class="line"><span class="comment"># skip-grant-tables=true</span></span><br></pre></td></tr></table></figure>
<p>不存在mysql用户时用useradd创建用户，groupadd创建组<br>
<a href="https://www.cnblogs.com/whitehorse/p/5847278.html" target="_blank" rel="noopener">useradd与adduser的区别</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 用户是否存在查看</span></span><br><span class="line">cat /etc/passwd|grep mysql</span><br><span class="line"><span class="comment"># 组是否存在</span></span><br><span class="line">cat /etc/group|grep mysql</span><br></pre></td></tr></table></figure>
<p>然后执行如下命令，下述内容可能在不同版本不同平台有些许不同</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 生成数据库文件</span></span><br><span class="line"><span class="comment"># 此步之后在log-error路径的输出中存在初始密码</span></span><br><span class="line">mysqld --initialize</span><br><span class="line"><span class="comment"># 可在查看log文件路径</span></span><br><span class="line"><span class="comment"># 查看密码</span></span><br><span class="line">cat /var/<span class="built_in">log</span>/mysqld.log|grep password</span><br><span class="line"><span class="comment"># 找不到mysql.log文件的位置可以尝试用find找找</span></span><br><span class="line">find / -name mysqld.log</span><br><span class="line"><span class="comment"># 如果实在找不到密码，在启动mysqld之前先跳过验证</span></span><br><span class="line"><span class="comment"># 在配置文件中修改，或者在启动mysqld时附加参数--skip-grant-tables</span></span><br><span class="line"><span class="comment"># window需要多一步安装服务,linux上不需要此步</span></span><br><span class="line">mysqld --install</span><br><span class="line"><span class="comment"># 生成的文件位置可用如下命令查看</span></span><br><span class="line"><span class="comment"># 数据文件</span></span><br><span class="line">mysqld --verbose --<span class="built_in">help</span>|grep datadir</span><br><span class="line"><span class="comment"># pid文件</span></span><br><span class="line">mysqld --verbose --<span class="built_in">help</span>|grep pid-file</span><br><span class="line"><span class="comment"># 可以使用ll命令查看文件权限，所有者，所属组等</span></span><br><span class="line">ll datadir</span><br><span class="line"><span class="comment"># 因为设置了user=mysql,需要修改文件夹所有者,-R为递归</span></span><br><span class="line"><span class="comment"># 不设置的话无法读写这些文件夹，导致无法启动</span></span><br><span class="line"><span class="comment"># datador默认为</span></span><br><span class="line">chown mysqluser datadir -R</span><br><span class="line">chgrp mysqluser datadir -R</span><br><span class="line">chown mysqluser pid-file-dir -R</span><br><span class="line">chgrp mysqluser pid-file-dir -R</span><br><span class="line"><span class="comment"># 启动服务</span></span><br><span class="line">sevice mysqld start</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">systemctl start mysqld</span><br><span class="line"><span class="comment"># or后台启动，这样启动的只能用kill来终止</span></span><br><span class="line">mysqld &amp;</span><br><span class="line"><span class="comment"># 跳过验证启动方法</span></span><br><span class="line">mysqld --skip-grant-tables &amp;</span><br><span class="line"><span class="comment"># 登录,初始密码有特殊字符需要用单引号引起来</span></span><br><span class="line">mysql -uroot -p<span class="string">'yourpswd'</span></span><br><span class="line"><span class="comment"># 第一次登陆需要改初始密码</span></span><br><span class="line">alter user root@<span class="string">'localhost'</span> identified by <span class="string">'yourpswd'</span>;</span><br></pre></td></tr></table></figure>
<p>大功告成！</p>
<h2 id="可能出现的错误">可能出现的错误</h2>
<ol>
<li>
<p>安装mysql-community-server提示requires glibc2.28<br>
原因是安装错了仓库版本，但我一开始认为是glibc版本过低，尝试编译安装glibc,后来发现有些即使存在版本不低的lib也会报错才知道不是版本原因</p>
</li>
<li>
<p>systemctl启动mysqld失败</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看报错</span></span><br><span class="line">journalctl -xe</span><br><span class="line"><span class="comment"># 报错pam unable to dlopen:/lib64/libnsl.so.1: symbol __nss_hash, version GLIBC_PRIVATE not defined in file libc.so.6 with link time reference</span></span><br><span class="line"><span class="comment">#  /lib64/libc.so.6: version `GLIBC_2.25' not found (required by /lib64/libcrypt.so.1)</span></span><br><span class="line"><span class="comment"># 但是通过如下命令检查这些定义都存在</span></span><br><span class="line">strings /lib64/libc.so.6|grep glibc</span><br><span class="line">strings /lib64/libc.so.6|grep __nss_hash</span><br><span class="line"><span class="comment"># 解决办法，重启，因为GLIBC_2.25是刚安装的，得重启crond</span></span><br><span class="line"><span class="comment"># centos 7以前的版本重启</span></span><br><span class="line">/etc/init.d/crond restart</span><br><span class="line"><span class="comment"># centos 7重启</span></span><br><span class="line">systemctl restart crond</span><br><span class="line"><span class="comment"># 但是仍可能存在其他问题，一般都是由于不用root启动带来的权限问题</span></span><br></pre></td></tr></table></figure>
<p>把mysqld.service文件里的用户改成root可以解决但可能会带来安全问题</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[Service]</span><br><span class="line">User=root</span><br><span class="line">Group=root</span><br></pre></td></tr></table></figure>
<p>直接注释掉也行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[Service]</span><br><span class="line"><span class="comment"># nginx的nginx.service配置文件里不存在User这两句</span></span><br><span class="line"><span class="comment"># User=mysql</span></span><br><span class="line"><span class="comment"># Group=mysql</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="自行编译安装glibc（没成功，仅记录安装过程学到的经验）">自行编译安装glibc（没成功，仅记录安装过程学到的经验）</h2>
<p><a href="http://ftp.gnu.org/gnu/" target="_blank" rel="noopener">在这个网站找合适版本</a>的压缩包，编译安装也是个必要掌握的手段，曾经刚开始用centos时由于不知道yum依赖python，看到系统装的是python2.7，就把它卸了想装python3结果才发现yum不能用了,想尽办法重新安装yum，更新rpm，花了较长时间最后发现编译安装个python就能解决</p>
<ol>
<li>编译glibc的时候可能会提示某些组件版本过低,configure失败<br>
仔细看configure输出会把版本低或缺失的依赖列出来，或者可以对照glibc解压路径下的INCLUDE文件查看依赖那些组件，及版本号，<a href="http://ftp.gnu.org/gnu/" target="_blank" rel="noopener">缺什么在这个网站找相应源码编译安装</a></li>
<li>compiler版本低<br>
gcc版本低，编译安装高版本</li>
<li>gcc自行编译安装，configure时提示缺少依赖<br>
先通过在源文件目录运行./contrib/download_prerequisites下载依赖包，需要较长时间，再逐个编译安装</li>
<li>gcc编译时提示不存在32位编译环境<br>
按提示重新运行configure并且附带参数–disable-mutilib,编译时间较长</li>
<li>gcc编译时提示缺乏必要的库<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装</span></span><br><span class="line"> yum install glibc-headers</span><br><span class="line"> yum install gcc-c++</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="gcc编译完成后">gcc编译完成后</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#可以保存以前的gcc</span></span><br><span class="line">mv /usr/bin/gcc /usr/bin/gcc-版本号</span><br><span class="line">mv /usr/bin/g++ /usr/bin/g++-版本号</span><br><span class="line">mv /usr/bin/c++ /usr/bin/c++-版本号</span><br><span class="line"><span class="comment">#创建软链接</span></span><br><span class="line">ln -s /usr/<span class="built_in">local</span>/bin/gcc /usr/bin/gcc</span><br><span class="line">ln -s /usr/<span class="built_in">local</span>/bin/g++ /usr/bin/g++</span><br><span class="line">ln -s /usr/<span class="built_in">local</span>/bin/c++ /usr/bin/c++</span><br><span class="line"><span class="comment"># 基本上命令行工具都可以通过--version,-v查看版本</span></span><br><span class="line"><span class="comment"># 都可以通过--help,-h,-?查看使用方法和参数列表</span></span><br><span class="line">gcc --version</span><br></pre></td></tr></table></figure>
<h3 id="编译glibc">编译glibc</h3>
<p>注意不要放在默认的/usr/local里否则会有提示，用–prefix设置到/usr里<br>
或者可以安装到其他目录，然后通过环境变量来指定glibc</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> LD_PRELOAD=/opt/glibc/libc-2.31.so</span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=/opt/glibc/lib</span><br></pre></td></tr></table></figure>
<h3 id="问题">问题</h3>
<p>一时手贱把libc.so.6删了想重新链接到新版本，才知道删了会导致系统指令不可用<br>
解决方法</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 命令前设置LD_PRELOAD的值指定到哪加载共享对象</span></span><br><span class="line">LD_PRELOAD=/usr/lib64/libc-2.31.so ln -s /usr/lib64/libc-2.31.so /usr/lib64/libc.so.6</span><br></pre></td></tr></table></figure>
<h3 id="rpm方式安装glibc">rpm方式安装glibc</h3>
<p>编译glibc2.31成功,安装了glibc2.31后还是无法安装mysql,但编译glibc2.29和2.28总是失败<br>
总是报slotinfo数组越界的问题，查看代码改了这处又有另一处<br>
实在没办法换一种方式，用rpm安装<br>
<a href="http://rpmfind.net/linux/rpm2html/search.php?query=glibc-common&amp;submit=Search+...&amp;system=&amp;arch=" target="_blank" rel="noopener">glibc rpm包地址</a><br>
需要下glibc,glibc-common,glibc-all-langpacks三个包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 需要同时安装，否则会报错缺少依赖</span></span><br><span class="line"><span class="comment"># 时间较长可添加-v选项查看输出</span></span><br><span class="line">rpm -i glibc glibc-common glibc-all-langpacks</span><br><span class="line"><span class="comment"># 有时可加--force --nodeps选项，代表强制安装和不校验依赖</span></span><br></pre></td></tr></table></figure>
<p>第一次rpm安装时没动静，提示.rpm: Header V3 RSA/SHA256 Signature, key ID 8483c65d: NOKEY<br>
先关闭进程，处理步骤</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ctrl+z挂起后</span></span><br><span class="line"><span class="built_in">jobs</span> -l <span class="comment">#查看挂起进程pid</span></span><br><span class="line"><span class="built_in">kill</span> -9 pid</span><br></pre></td></tr></table></figure>
<p><a href="https://www.cnblogs.com/doudou130702/p/5961233.html" target="_blank" rel="noopener">上述警告的原因和解决方案</a></p>
<blockquote>
<p>故障原因：<br>
由于系统中先安装了你要安装的RPM包，而后你又安装了更低版本的，导致系统中的/lib64/libfreebl3.chk和/lib64/libfreebl3.so两个库文件被降级，与系统中其它的库文件版本不一致，从而导致rpm命令无法正常执行<br>
此文给的解决办法是从别的机器上传过来</p>
</blockquote>
<p>再次安装发现直接报错，BDB0087 DB_RUNRECOVERY: Fatal error, run database recovery<br>
解决办法把/var/lib/rpm下的__db文件全删了</p>
<h1>jdk</h1>
<p><a href="https://www.oracle.com/java/technologies/javase-jdk14-downloads.html" target="_blank" rel="noopener">jdk下载，有rpm和可执行文件压缩包</a><br>
在链接上右键点击复制链接地址没用，wget下载rpm文件时被重定向到了另一个地址，下了个5kb的网页，当时还惊喜100多兆的文件瞬间下好，看了一下只有5kb。<br>
需要在本地点下载获取复制到下载链接后取消下载，再用wget在服务器上下载，不过本地下载再用winscp上传快一些。</p>
<h2 id="压缩包安装">压缩包安装</h2>
<p>下载压缩包解压到到自定文件夹后配置环境变量</p>
<blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br></pre></td></tr></table></figure>
</blockquote>
<p><a href="https://www.cnblogs.com/shizhijie/p/9050029.html" target="_blank" rel="noopener">环境变量说明</a></p>
<blockquote>
<p>profile中加入配置如下</p>
</blockquote>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 你的jdk文件路径</span></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/path/jdk/installed</span><br><span class="line"><span class="comment"># java 1.5以后不需要配置CLASS_PATH也行</span></span><br><span class="line"><span class="built_in">export</span> CLASSPATH=.:<span class="variable">$JAVA_HOME</span>/lib/tools.jar:<span class="variable">$JAVA_HOME</span>/lib/dt.jar:<span class="variable">$JAVA_HOME</span>/lib</span><br><span class="line"><span class="comment"># 可执行文件路径</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$JAVA_HOME</span>/bin:<span class="variable">$PATH</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>执行以下命令，读取环境变量。</p>
</blockquote>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure>
<h2 id="tomcat">tomcat</h2>
<p>十几兆，下载比较慢本地下载后上传<br>
<a href="https://archive.apache.org/dist/tomcat/" target="_blank" rel="noopener">这里选择版本</a><br>
也可以做个链接</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /path/tomcat/installed</span><br><span class="line"><span class="comment"># 不做startup.sh文件的链接是因为这个单词太常见了，说不就和什么撞了</span></span><br><span class="line"><span class="comment"># 况且我也习惯用catalina启动,$PWD为当前路径</span></span><br><span class="line">ln -s <span class="variable">$PWD</span>/bin/catalina.sh /usr/bin/catalina</span><br><span class="line"><span class="comment"># 然后可以执行看环境是否配好,以及使用说明</span></span><br><span class="line">catalina</span><br></pre></td></tr></table></figure>
<p><a href="https://blog.csdn.net/yuhuafeixian/article/details/72792183?utm_source=blogxgwz4" target="_blank" rel="noopener">关于startup.sh和catalina.sh的区别看这里</a>不知道可不可信最好自己cat输出一下看看<br>
关于各路径的官方说明,<a href="https://tomcat.apache.org/tomcat-9.0-doc/introduction.html" target="_blank" rel="noopener">详细的官方文档</a></p>
<blockquote>
<p>/bin - Startup, shutdown, and other scripts. The *.sh files (for Unix systems) are functional duplicates of the *.bat files (for Windows systems). Since the Win32 command-line lacks certain functionality, there are some additional files in here.<br>
/conf - Configuration files and related DTDs. The most important file in here is server.xml. It is the main configuration file for the container.<br>
/logs - Log files are here by default.<br>
/webapps - This is where your webapps go.</p>
</blockquote>
<p>几个重要的配置文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># context.xml app部署配置</span></span><br><span class="line"><span class="comment"># 配置允许连接的Ip，域名啥的</span></span><br><span class="line"><span class="variable">$CATALINA_BASE</span>/conf/[enginename]/[hostname]/[webappname].xml</span><br><span class="line"><span class="variable">$CATALINA_BASE</span>/webapps/[webappname]/META-INF/context.xml</span><br><span class="line"><span class="comment"># Configuring Manager Application Access(设置管理程序的连接权限)</span></span><br><span class="line"><span class="variable">$CATALINA_BASE</span>/conf/tomcat-users.xml</span><br><span class="line"><span class="comment"># 用户数据库实例，服务的端口，webapp位置，域名，上面tomcat-users.xml的位置等在server.xml里配置</span></span><br><span class="line"><span class="variable">$CATALINA_BASE</span>/conf/server.xml</span><br><span class="line"><span class="comment"># 作用和app的contex.xml差不多，不过是全局所有web app生效的</span></span><br><span class="line"><span class="variable">$CATALINA_BASE</span>/conf/context.xml</span><br><span class="line"><span class="comment"># 其余配置我也没太细去了解，具体看官网</span></span><br></pre></td></tr></table></figure>
<p><a href="https://tomcat.apache.org/tomcat-9.0-doc/manager-howto.html" target="_blank" rel="noopener">manager连接说明</a><br>
<a href="https://tomcat.apache.org/tomcat-9.0-doc/config/" target="_blank" rel="noopener">配置说明</a><br>
tomcat-users.xml如何配置在文件中有样例<br>
用户角色说明</p>
<blockquote>
<p>manager-gui — Access to the HTML interface.<br>
manager-status — Access to the “Server Status” page only.<br>
manager-script — Access to the tools-friendly plain text interface that is described in this document, and to the “Server Status” page.<br>
manager-jmx — Access to JMX proxy interface and to the “Server Status” page.</p>
</blockquote>
<h3 id="禁止某个webapp外网访问">禁止某个webapp外网访问</h3>
<p><a href="https://blog.csdn.net/laokaizzz/article/details/78423216" target="_blank" rel="noopener">这个</a><br>
在上文提到的app的context.xml中添加如下</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Context</span> <span class="attr">privileged</span>=<span class="string">"true"</span> <span class="attr">antiResourceLocking</span>=<span class="string">"false"</span> <span class="attr">docBase</span>=<span class="string">"$&#123;catalina.home&#125;/webapps/manager"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">Valve</span> <span class="attr">className</span>=<span class="string">"org.apache.catalina.valves.RemoteAddrValve"</span> <span class="attr">allow</span>=<span class="string">"127\.0\.0\.1"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Context</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="也可以和nginx配合">也可以和nginx配合</h3>
<p>仅将catalina绑定到localhost:8080或者说127.0.0.1:8080然后nginx设置反向代理.<br>
发往nginx的请求中:静态文件由Nginx处理动态由tomcat处理.<br>
server.xml中配置如下</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 在connector标签上加一个属性address --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Connector</span> <span class="attr">port</span>=<span class="string">"8080"</span> <span class="attr">protocol</span>=<span class="string">"HTTP/1.1"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">connectionTimeout</span>=<span class="string">"20000"</span> <span class="attr">address</span>=<span class="string">"127.0.0.1"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">redirectPort</span>=<span class="string">"8443"</span> /&gt;</span>...</span><br><span class="line">               <span class="tag">&lt;/<span class="name">Connnector</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>nginx配置反向代理的方法见下文</p>
<h1>nginx</h1>
<h2 id="安装">安装</h2>
<p>可以编译安装，因为之前编译安装过，此次采用yum安装<br>
<a href="https://cloud.tencent.com/document/product/213/38056" target="_blank" rel="noopener">摘自腾讯文档</a></p>
<blockquote>
<ol>
<li>执行以下命令，在 /etc/yum.repos.d/ 下创建 nginx.repo 文件。</li>
</ol>
</blockquote>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/yum.repos.d/nginx.repo</span><br></pre></td></tr></table></figure>
<blockquote>
<ol start="2">
<li>配置内容</li>
</ol>
</blockquote>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[nginx] </span><br><span class="line">name = nginx repo </span><br><span class="line">baseurl = https://nginx.org/packages/mainline/centos/7/<span class="variable">$basearch</span>/ </span><br><span class="line">gpgcheck = 0 </span><br><span class="line">enabled = 1</span><br></pre></td></tr></table></figure>
<blockquote>
<ol start="3">
<li>yum安装</li>
</ol>
</blockquote>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y nginx</span><br></pre></td></tr></table></figure>
<p>配置路径在/etc/nginx/nginx.conf</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 链接</span></span><br><span class="line">ln -s /path/nginx /usr/<span class="built_in">local</span>/bin/nginx</span><br><span class="line"><span class="comment"># 测试配置文件</span></span><br><span class="line">nginx -t</span><br><span class="line"><span class="comment"># 启动</span></span><br><span class="line">service nginx start</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">systemctl start nginx</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">nginx</span><br></pre></td></tr></table></figure>
<h2 id="配置">配置</h2>
<p>初始配置文件内容如下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">user nginx;</span><br><span class="line"><span class="comment"># 所属用户</span></span><br><span class="line">worker_processes auto;</span><br><span class="line">error_log /var/<span class="built_in">log</span>/nginx/error.log;</span><br><span class="line"><span class="comment"># 错误输出位置</span></span><br><span class="line">pid /run/nginx.pid;</span><br><span class="line"><span class="comment"># 运行中程序pid位置，用以reload,stop</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Load dynamic modules. See /usr/share/nginx/README.dynamic.</span></span><br><span class="line">include /usr/share/nginx/modules/*.conf;</span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections 1024;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    log_format  main  <span class="string">'$remote_addr - $remote_user [$time_local] "$request" '</span></span><br><span class="line">                      <span class="string">'$status $body_bytes_sent "$http_referer" '</span></span><br><span class="line">                      <span class="string">'"$http_user_agent" "$http_x_forwarded_for"'</span>;</span><br><span class="line"></span><br><span class="line">    access_log  /var/<span class="built_in">log</span>/nginx/access.log  main;</span><br><span class="line"></span><br><span class="line">    sendfile            on;</span><br><span class="line">    tcp_nopush          on;</span><br><span class="line">    tcp_nodelay         on;</span><br><span class="line">    keepalive_timeout   65;</span><br><span class="line">    types_hash_max_size 2048;</span><br><span class="line"></span><br><span class="line">    include             /etc/nginx/mime.types;</span><br><span class="line">    default_type        application/octet-stream;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Load modular configuration files from the /etc/nginx/conf.d directory.</span></span><br><span class="line">    <span class="comment"># See http://nginx.org/en/docs/ngx_core_module.html#include</span></span><br><span class="line">    <span class="comment"># for more information.</span></span><br><span class="line">    include /etc/nginx/conf.d/*.conf;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 服务实例</span></span><br><span class="line">    server&#123;</span><br><span class="line">      <span class="comment"># https协议在443端口</span></span><br><span class="line">    	listen        80;<span class="comment">#ip 是否启用ssl http版本等</span></span><br><span class="line">    	<span class="comment"># tcp端口和ip</span></span><br><span class="line">    	server_name   ;<span class="comment"># 域名</span></span><br><span class="line">    	root          ;<span class="comment"># 服务根路径</span></span><br><span class="line">    	include       /etc/nginx/default.d/*.conf;</span><br><span class="line">      <span class="comment"># https需要启用ssl加密</span></span><br><span class="line">      <span class="comment"># ssl on;</span></span><br><span class="line">      <span class="comment"># 证书位置，需要自行申请腾讯云，阿里云都可以</span></span><br><span class="line">      <span class="comment"># ssl_certificate ******.crt;</span></span><br><span class="line">      <span class="comment"># 证书密匙</span></span><br><span class="line">      <span class="comment"># ssl_certificate_key ******.key;</span></span><br><span class="line">      <span class="comment"># ssl_session_timeout 5m;</span></span><br><span class="line">      <span class="comment"># ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span></span><br><span class="line">      <span class="comment"># ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;</span></span><br><span class="line">      <span class="comment"># ssl_prefer_server_ciphers on;</span></span><br><span class="line">    	<span class="comment"># 其他配置</span></span><br><span class="line">    	location / &#123;</span><br><span class="line">    		<span class="comment"># 设置根路径的默认文件</span></span><br><span class="line">    		index index.html;</span><br><span class="line">    	&#125;</span><br><span class="line">    	<span class="comment"># 发生错误时，跳转页面，错误用错误码表示，这里是未找到</span></span><br><span class="line">    	error_page 404 /404.html;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>大多数的配置都可以保持默认。<br>
重点在于server中的内容<br>
server决定的就是你的服务内容，其中几个参数上面注释中已有<br>
在server中location配置可以针对某些特定的路径做处理<br>
location中可以配置的东西有很多<br>
下面一一介绍</p>
<ol>
<li>
<p>配置参数<br>
location一般格式如下<br>
location [匹配方法] 匹配表达式 {</p>
<p>}<br>
其中匹配方法用符号选择也可不填<br>
~代表不区分大小写的正则表达式<br>
=表示匹配某个精确的路径<br>
~*表示不区分大小写的正则表达式</p>
<p>匹配表达式则是用于  根据匹配方法匹配用户请求的路径名<br>
例如</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">location ~ ^/py/* &#123;</span><br><span class="line">	<span class="comment"># nginx可以配置某一特定请求路径对应的位置</span></span><br><span class="line">	root   /path;</span><br><span class="line">	<span class="comment"># 一些处理</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>下面有一种不用正则表达式的方式</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">location /server/&#123;</span><br><span class="line">    proxy_pass localhost:8080/;</span><br><span class="line">    <span class="comment"># uwsgi配置</span></span><br><span class="line">    <span class="comment"># include uwsgi_params;</span></span><br><span class="line">    <span class="comment"># uwsgi_pass 127.0.0.1:1234;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># 此时对http://ip/server/a的访问会被转到localhost:8080/a</span></span><br></pre></td></tr></table></figure>
<p>nginx就会对<strong><a href="http://xn--ip-0p3cj1pytflqs6w7a/py/%E4%BB%BB%E6%84%8F%E8%B7%AF%E5%BE%84" target="_blank" rel="noopener">http://你的域名或ip/py/任意路径</a></strong>路径下的请求进行处理</p>
</li>
<li>
<p>静态文件<br>
据网上说，nginx擅长静态文件的处理，也就是图片，css样式，html文档，js脚本之类的文件<br>
举例location配置方法如下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">location ~ .(jpg|png|jpeg|ico)$ &#123;</span><br><span class="line">    expires 30d;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># 其中，~表示区分大小写的正则匹配，后面就可以用正则表达式来匹配需要处理的路径名了</span></span><br><span class="line"><span class="comment"># expires定义文件过期的日期，静态文件一边不会做更改，因而可以设置较长的过期日期</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>rewrite<br>
rewrite用于对某些路径重定向<br>
可以用于条件语句中（nginx配置中是可以有if条件语句的）,location中,和直接在server里<br>
我对rewrite是不甚了解的，只能说是用过，因而这里有个<a href="https://www.cnblogs.com/czlun/articles/7010604.html" target="_blank" rel="noopener">详细的介绍页面</a>,当然，地址可能失效，因而同样记录在这篇博客里。<br>
以下内容搬自前面给出的博客里。</p>
<blockquote>
<p>rewrite使用格式</p>
</blockquote>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rewrite    &lt;正则表达式&gt;    &lt;replacement&gt;    [flag]</span><br></pre></td></tr></table></figure>
<blockquote>
<p>其中replacement为要rewrite到的内容，flag标记说明如下：<br>
last  #本条规则匹配完成后，继续向下匹配新的location URI规则<br>
break  #本条规则匹配完成即终止，不再匹配后面的任何规则<br>
redirect  #返回302临时重定向，浏览器地址会显示跳转后的URL地址<br>
permanent  #返回301永久重定向，浏览器地址栏会显示跳转后的URL地址</p>
</blockquote>
</li>
<li>
<p>反向代理<br>
location中，可以通过proxy_pass设置反向代理<br>
上面提到的nginx的优势是静态文件，动态服务就不是其专长了，因而可以对nginx将某些请求转发到特定的其他服务里<br>
格式</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">proxy_pass ip或域名</span><br><span class="line"><span class="comment"># 例</span></span><br><span class="line"><span class="comment"># 注由于规则是正则表达式，因此星号的意义不能像许多其他地方一样作为通配符，正则表达式中*代表匹配前一项0到多次</span></span><br><span class="line">location ~ ^/server/ &#123;</span><br><span class="line">    proxy_pass http://127.0.0.1:8080;</span><br><span class="line">    <span class="comment"># 此处用户访问  http://你的域名/server/app  时</span></span><br><span class="line">    <span class="comment"># 实际上访问了  http://127.0.0.1:8080/server/app</span></span><br><span class="line">    <span class="comment"># 注不可在ip或域名后加上反斜杠 /</span></span><br><span class="line">    <span class="comment"># 否则location不得用正则表达式匹配,下面有介绍</span></span><br><span class="line">&#125;</span><br><span class="line">location /server/ &#123;</span><br><span class="line">    proxy_pass http://127.0.0.1:8080/;</span><br><span class="line">    <span class="comment"># 此处用户访问  http://你的域名/server/app  时</span></span><br><span class="line">    <span class="comment"># 实际上访问了  http://127.0.0.1:8080/app</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>proxy_pass有一些配置用来优化服务器，以下提几个重要的</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">client_max_body_size ;    <span class="comment"># 允许客户端请求的最大单文件字节数</span></span><br><span class="line">proxy_buffer_size ;             <span class="comment"># 设置代理服务器（nginx）保存用户头信息的缓冲区大小</span></span><br><span class="line">proxy_buffers ;               <span class="comment"># 缓冲区，网页平均在32k以下的话，这样设置</span></span><br><span class="line">proxy_busy_buffers_size ;    <span class="comment"># 高负荷下缓冲大小（proxy_buffers*2）</span></span><br><span class="line"><span class="comment"># 其实，作为一个个人网站来说，不需要太过这些优化配置参数，因为这样一个</span></span><br><span class="line"><span class="comment"># 小破站能同时有几个人访问就很不错了，所以不会对服务器带来什么负担，</span></span><br><span class="line"><span class="comment"># 所以优化问题不是重点，可以待日后在学</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="uwsgi参数">uwsgi参数</h2>
<p><a href="https://blog.csdn.net/weixin_33802505/article/details/92478331" target="_blank" rel="noopener">uwsgi参数</a></p>
<h2 id="重启">重启</h2>
<p>每次修改完配置后都需要重启，一般</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -s reload</span><br></pre></td></tr></table></figure>
<p>当然修改完配置后可以测试配置是否正确。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -t</span><br></pre></td></tr></table></figure>
<p>重启失败一般有可能是配置格式不对，或Pid文件不存在，前者自行寻找原因,<br>
若是pid文件不存在，创建一个后缀为pid的空文件，在配置文件里将Pid文件路径改为新建的文件路径，之后用以下方法强制重启</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">netstat -apt|grep nginx</span><br><span class="line"><span class="comment"># 执行完上面那步后你可以看到nginx Master进程的pid</span></span><br><span class="line"><span class="built_in">kill</span> pid</span><br><span class="line"><span class="comment"># 终结对应pid</span></span><br><span class="line">nginx</span><br><span class="line"><span class="comment"># 再次启动</span></span><br></pre></td></tr></table></figure>
<h1>php</h1>
<p>腾讯云文档给出的方法</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装软件源</span></span><br><span class="line">rpm -Uvh https://mirrors.cloud.tencent.com/epel/epel-release-latest-7.noarch.rpm</span><br><span class="line">rpm -Uvh https://mirror.webtatic.com/yum/el7/webtatic-release.rpm</span><br><span class="line"><span class="comment"># 安装软件</span></span><br><span class="line">yum -y install mod_php72w.x86_64 php72w-cli.x86_64 php72w-common.x86_64 php72w-mysqlnd php72w-fpm.x86_64</span><br><span class="line"><span class="comment"># 启动php-fpm</span></span><br><span class="line">systemctl start php-fpm</span><br><span class="line"><span class="comment"># 设为开机启动</span></span><br><span class="line">systemctl <span class="built_in">enable</span> php-fpm</span><br></pre></td></tr></table></figure>
<p><a href="https://www.cnblogs.com/rxbook/p/9106513.html" target="_blank" rel="noopener">编译安装</a><br>
查找配置文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># php-fpm</span></span><br><span class="line">php-fpm -t</span><br><span class="line"><span class="comment"># php</span></span><br><span class="line">find / -name php.*</span><br></pre></td></tr></table></figure>
<h2 id="扩展">扩展</h2>
<h1>多版本python</h1>
<p>系统默认装的2.7,从python官网下载python3源码，编译安装<br>
编译前需要准备必要的依赖否则报错部分可选模块编译失败</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 可能需要安装,未注释的为不确定是否有效</span></span><br><span class="line">yum install ncurses-devel <span class="comment">#_ncurses</span></span><br><span class="line">yum install libuuid-devel</span><br><span class="line">yum install -y zlib zlib-devel</span><br><span class="line">yum install tkinter </span><br><span class="line">yum install tcl-devel tk-devel </span><br><span class="line">yum install lzma</span><br><span class="line">yum install libgdbm-dev</span><br><span class="line">yum install xz-devel</span><br><span class="line">yum install readline-devel* <span class="comment">#readline</span></span><br><span class="line">yum install uuid-devel* <span class="comment">#_uuid</span></span><br><span class="line">yum install sqlite-devel* <span class="comment">#_sqlite3</span></span><br><span class="line">yum install gdbm-devel* <span class="comment">#_dbm _gdbm</span></span><br><span class="line">yum install bzip2* <span class="comment">#_bz2</span></span><br><span class="line"><span class="comment"># 其他的缺什么通过yum搜一下</span></span><br><span class="line"><span class="comment"># 例如提示_sqlite3缺乏依赖，就执行如下</span></span><br><span class="line">yum search sqlite</span><br><span class="line"><span class="comment"># yum搜不到再百度</span></span><br><span class="line"><span class="comment"># 问题都解决后make install搞定</span></span><br></pre></td></tr></table></figure>
<p>python 2.7装在/usr里<br>
python3安装时未设置prefix所以装在/usr/local<br>
需要建立链接到/usr/bin</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s /usr/<span class="built_in">local</span>/bin/python3.8 /usr/bin/python3</span><br></pre></td></tr></table></figure>
<h2 id="可能的错误">可能的错误</h2>
<h3 id="ncurses-error-implicit-declaration-of-function-‘setupterm’-did-you-mean-‘set-ter’">ncurses error: implicit declaration of function ‘setupterm’; did you mean ‘set_ter’</h3>
<p>具体原因不明，但做了如下尝试，成功解决<br>
make clean<br>
重新make<br>
还不行可能得重新configure</p>
<h3 id="INFO-Could-not-locate-ffi-libs-and-or-headers">INFO: Could not locate ffi libs and/or headers</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum search ffi</span><br><span class="line"><span class="comment"># 找到了libffi-devel</span></span><br><span class="line">yum install libffi-devel</span><br></pre></td></tr></table></figure>
<h3 id="INFO-Can’t-locate-Tcl-Tk-libs-and-or-headers">INFO: Can’t locate Tcl/Tk libs and/or headers</h3>
<p>编译安装tcl/tk,<a href="http://www.tcl.tk/software/tcltk/download.html" target="_blank" rel="noopener">源码下载</a></p>
<p>编译tk时报错fatal error: X11/Xlib.h: No such file or directory</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install libXt-devel</span><br></pre></td></tr></table></figure>
<h3 id="uuid-create参数过多">uuid_create参数过多</h3>
<p>uuid_create声明在uuid.h<br>
根据查看Modules/_uuidmodule.c发现调用uuid_create传入了两个参数<br>
/usr/inlcude/uuid.h里声明的uuid_create只有一个参数，可能是库的版本问题<br>
因为重复安装了一些东西，发现/usr/include/uuid/uuid.h文件也存在,但其中似乎没有声明uuid_create，不过声明了uuid_generate_time_safe<br>
改Modules/_uuidmodule.c，在开头加上</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// uuid/uuid.h存在，编译时引入/usr/include/uuid/uuid.h不引入/usr/inlcude/uuid.h</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> HAVE_UUID_UUID_H</span></span><br><span class="line"><span class="comment">// uuid_generate_time_safe存在，编译时执行uuid_generate_time_safe不执行uuid_create</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> HAVE_UUID_GNERATE_TIME_SAFE</span></span><br><span class="line"><span class="comment">// 重新make clean&amp;&amp;make成功</span></span><br><span class="line"><span class="comment">// 有时候还出错可能需要重新configure且重新make</span></span><br><span class="line"><span class="comment">// 最后</span></span><br><span class="line">make install</span><br></pre></td></tr></table></figure>
<h3 id="Could-not-build-the-ssl-module">Could not build the ssl module!</h3>
<p>Python requires an OpenSSL 1.0.2 or 1.1 compatible libssl with X509_VERIFY_PARAM_set1_host().<br>
LibreSSL 2.6.4 and earlier do not provide the necessary APIs, <a href="https://github.com/libressl-portable/portable/issues/381" target="_blank" rel="noopener">https://github.com/libressl-portable/portable/issues/381</a><br>
意思是：Python需要具有X509_VERIFY_PARAM_set1_host（）的OpenSSL 1.0.2或1.1兼容libssl。<br>
LibreSSL 2.6.4和更早版本不提供必要的API，https：<a href="//github.com/libressl-portable/portable/issues/381">//github.com/libressl-portable/portable/issues/381</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 搜索需要的包</span></span><br><span class="line">yum search openssl</span><br><span class="line"><span class="comment"># 但我把所有包都装了也没用</span></span><br><span class="line">yum install openssl*</span><br><span class="line"><span class="comment"># 只好下源文件自行编译，编译过程较顺利</span></span><br></pre></td></tr></table></figure>
<p><a href="https://www.openssl.org/source/mirror.html" target="_blank" rel="noopener">openssl源码下载</a></p>
<h2 id="pip安装">pip安装</h2>
<p>首先用whereis pip看看有没有，有就链接到/usr/bin,没有就装</p>
<blockquote>
<p>一、脚本安装pip<br>
首先下载get-pip.py脚本，然后运行即可安装：</p>
</blockquote>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$  curl -O https://bootstrap.pypa.io/get-pip.py <span class="comment">#或wget</span></span><br><span class="line">$  python get-pip.py</span><br></pre></td></tr></table></figure>
<blockquote>
<p>二、使用包管理软件安装<br>
1、首先安装epel扩展源：</p>
</blockquote>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum -y install epel-release</span><br></pre></td></tr></table></figure>
<blockquote>
<p>2、然后安装python-pip</p>
</blockquote>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum -y install python-pip</span><br></pre></td></tr></table></figure>
<p>之后就可以用pip安装包了</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># virtualenv</span></span><br><span class="line">pip install virtualenv</span><br><span class="line"><span class="comment"># python3的pip链接成pip3</span></span><br><span class="line">ln -s /dir/install/pip /usr/bin/pip3</span><br><span class="line"><span class="comment"># 就可以用pip3管理python3的包了</span></span><br><span class="line"><span class="comment"># flask</span></span><br><span class="line">pip3 install flask</span><br><span class="line"><span class="comment"># 也可以这样装</span></span><br><span class="line">python3 -m pip install uwsgi</span><br></pre></td></tr></table></figure>
<p>pip配置国内源<br>
阿里云:<a href="http://mirrors.aliyun.com/pypi/simple/" target="_blank" rel="noopener">http://mirrors.aliyun.com/pypi/simple/</a><br>
中国科技大学:<a href="https://pypi.mirrors.ustc.edu.cn/simple/" target="_blank" rel="noopener">https://pypi.mirrors.ustc.edu.cn/simple/</a><br>
豆瓣:<a href="https://pypi.douban.com/simple/" target="_blank" rel="noopener">https://pypi.douban.com/simple/</a><br>
清华大学:<a href="https://pypi.tuna.tsinghua.edu.cn/simple/" target="_blank" rel="noopener">https://pypi.tuna.tsinghua.edu.cn/simple/</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 较早版本的pip似乎没有这条命令</span></span><br><span class="line">pip config <span class="built_in">set</span> global.index-url=yourhost</span><br><span class="line"><span class="comment"># 执行完命令后会提示配置写入了/root/.config/pip/pip.conf</span></span><br></pre></td></tr></table></figure>
<p><a href="https://www.cnblogs.com/kazihuo/p/11051319.html" target="_blank" rel="noopener">centos上配置也可以看这里（未验证是否有效）</a></p>
<h3 id="setuptools">setuptools</h3>
<p>除了pip很多库可以在源码中用<code>python setup.py install</code>安装，一般这种安装方法需要setuptools,<a href="http://pypi.python.org/pypi/setuptools" target="_blank" rel="noopener">这里</a>下载源码后，通过<code>pythoon setup.py install</code>安装后，其他库就可通过同样的命令安装了</p>
<h2 id="uwsgi配置">uwsgi配置</h2>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[uwsgi]</span></span><br><span class="line"><span class="comment">#用户和组</span></span><br><span class="line"><span class="attr">uid</span> = nginx</span><br><span class="line"><span class="attr">gid</span> = nginx</span><br><span class="line"><span class="comment"># 设置nginx uwsgi_pass时用</span></span><br><span class="line"><span class="attr">socket</span> = <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">8000</span></span><br><span class="line"><span class="comment"># 直接作为服务器时用</span></span><br><span class="line"><span class="comment">; http = 127.0.0.1:8000</span></span><br><span class="line"><span class="comment"># 状态服务</span></span><br><span class="line"><span class="comment">; stats = 127.0.0.1:8000</span></span><br><span class="line"><span class="attr">master</span> = <span class="literal">true</span></span><br><span class="line"><span class="attr">vhost</span> = <span class="literal">true</span></span><br><span class="line"><span class="attr">workers</span> = <span class="number">8</span></span><br><span class="line"><span class="attr">reload-mercy</span> = <span class="number">10</span></span><br><span class="line"><span class="attr">vacuum</span> = <span class="literal">true</span></span><br><span class="line"><span class="attr">max-requests</span> = <span class="number">10000</span></span><br><span class="line"><span class="attr">limit-as</span> = <span class="number">1024</span></span><br><span class="line"><span class="attr">buffer-size</span> = <span class="number">65535</span></span><br><span class="line"><span class="comment"># pid file重启或停止时用</span></span><br><span class="line"><span class="attr">pidfile</span> = /projects/pid/uwsgi.pid</span><br><span class="line"><span class="attr">daemonize</span> = /projects/log/uwsgi.log</span><br><span class="line"><span class="comment"># 项目网页路径</span></span><br><span class="line"><span class="comment">#chdir = /projects/python/html</span></span><br><span class="line"><span class="attr">callable</span> = app</span><br><span class="line"><span class="attr">chmod-socket</span> = <span class="number">660</span></span><br><span class="line"><span class="attr">enable-threads</span> = <span class="literal">true</span></span><br><span class="line"><span class="comment"># 启动文件</span></span><br><span class="line"><span class="attr">wsgi-file</span> = /projects/python/app.py</span><br></pre></td></tr></table></figure>
<p><a href="https://www.cnblogs.com/ajianbeyourself/p/12823295.html" target="_blank" rel="noopener">uwsgi常用参数配置</a><br>
使用</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动</span></span><br><span class="line">uwsgi --ini /projects/config/uwsgi.ini</span><br><span class="line"><span class="comment"># 停止</span></span><br><span class="line">uwsgi --stop /projects/pid/uwsgi.pid</span><br><span class="line"><span class="comment"># 重启</span></span><br><span class="line">uwsgi --reload /projects/pid/uwsgi.pid</span><br></pre></td></tr></table></figure>
<h1>nodejs</h1>
<p><a href="https://npm.taobao.org/mirrors/node/" target="_blank" rel="noopener">阿里云镜像</a><br>
同样有编译好的可执行文件，注意看包名，分平台的是可执行文件，不分平台是源码<br>
解压后放到自己喜欢的位置，然后把其中bin文件夹里的三个可执行文件位置连接到/usr/bin或者设置环境变量,最好是加全局变量，之后全局安装的可执行文件都在Bin里</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 可以看到全局安装的包的位置</span></span><br><span class="line">npm --<span class="built_in">help</span></span><br><span class="line"><span class="comment"># npm配置查看</span></span><br><span class="line">npm config list</span><br><span class="line"><span class="comment"># npm所有默认配置</span></span><br><span class="line">npm config ls -l</span><br><span class="line"><span class="comment"># 查看如何设置</span></span><br><span class="line">npm <span class="built_in">help</span> config</span><br></pre></td></tr></table></figure>
<h2 id="pm2">pm2</h2>
<p>nodejs的进程管理工具</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -g pm2</span><br></pre></td></tr></table></figure>
<h1>maven</h1>
<p><a href="https://mirrors.cnnic.cn/apache/maven/" target="_blank" rel="noopener">镜像网站</a><br>
有编译好的二进制文件<br>
也可以yum安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 可以搜到一个maven.noarch</span></span><br><span class="line">yum list maven</span><br><span class="line"><span class="comment"># 尝试安装发现要110个依赖，有点担心是否装错</span></span><br><span class="line">yum install maven</span><br></pre></td></tr></table></figure>
<p><a href="https://www.cnblogs.com/sanduzxcvbnm/p/11550819.html" target="_blank" rel="noopener">网上搜索到用如下方法yum安装</a></p>
<blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget http://repos.fedorapeople.org/repos/dchen/apache-maven/epel-apache-maven.repo -O /etc/yum.repos.d/epel-apache-maven.repo</span><br><span class="line">yum -y install apache-maven</span><br></pre></td></tr></table></figure>
</blockquote>
<p>设置环境变量</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> MAVEN_HOME=/usr/<span class="built_in">local</span>/maven</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$MAVEN_HOME</span>/bin</span><br></pre></td></tr></table></figure>
<h1>redis安装</h1>
<p>centos yum安装redis如下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 先列出一下</span></span><br><span class="line">yum list redis</span><br><span class="line"><span class="comment"># 找到了确定是这个在安装</span></span><br><span class="line">yum install redis*</span><br></pre></td></tr></table></figure>
<p>redis常用操作如下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 后面可以没有配置文件路径，此时采用默认配置，不会后台运行</span></span><br><span class="line">redis-server /path/of/config</span><br><span class="line"><span class="comment"># 一般安装完redis,会有样板配置文件，通过find查找</span></span><br><span class="line">find / -name redis.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># vim中搜索daemonize(似乎是这样拼)</span></span><br><span class="line"><span class="comment"># 将redis.conf文件中的daemonize no改为daemonize yes,此时再载入配置文件启动，就是后台运行了</span></span><br><span class="line"><span class="comment"># 当然也可以直接用参数进行后台启动</span></span><br><span class="line">vim redis-config-path</span><br><span class="line">redis-server /path/of/config</span><br><span class="line"></span><br><span class="line"><span class="comment"># 连接数据库</span></span><br><span class="line"><span class="comment"># 默认hostname是localhost,port是6379</span></span><br><span class="line">redis-cli -h hostname -p port</span><br><span class="line"></span><br><span class="line"><span class="comment"># 注意redis数据库操作不需要加';'</span></span><br><span class="line"><span class="comment"># 清库</span></span><br><span class="line">flushall</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看key统计</span></span><br><span class="line">info keyspace</span><br><span class="line"></span><br><span class="line"><span class="comment"># 选中index为1的database</span></span><br><span class="line">select 1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示当前库所有key</span></span><br><span class="line">keys *</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示key的数据类型</span></span><br><span class="line"><span class="built_in">type</span> keyname</span><br><span class="line"></span><br><span class="line"><span class="comment"># 其余操作自行百度</span></span><br></pre></td></tr></table></figure>
<h1>svn安装</h1>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install subversion</span><br></pre></td></tr></table></figure>
<p>svnadmin创建仓库</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">svnadmin create /your/repository/dir</span><br></pre></td></tr></table></figure>
<p>配置文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># authz中:</span></span><br><span class="line">[aliases]</span><br><span class="line"><span class="comment"># joe = /C=XZ/ST=Dessert/L=Snake City/O=Snake Oil, Ltd./OU=Research Institute/CN=Joe Average</span></span><br><span class="line">[groups]</span><br><span class="line">userg = users <span class="comment">#用户组，方便进行分组权限分配</span></span><br><span class="line">[<span class="built_in">test</span>:/] <span class="comment">#test项目的根目录</span></span><br><span class="line">@userg = rw</span><br><span class="line"><span class="comment"># users = rw</span></span><br><span class="line"><span class="comment">#[/] #根目录权限</span></span><br><span class="line"><span class="comment">#@userg = rw</span></span><br><span class="line"><span class="comment">#users = rw</span></span><br><span class="line"><span class="comment"># [repository:/baz/fuz]</span></span><br><span class="line"><span class="comment"># @harry_and_sally = rw</span></span><br><span class="line"><span class="comment"># * = r</span></span><br><span class="line"><span class="comment"># passwd中:</span></span><br><span class="line"></span><br><span class="line">[users] <span class="comment">#用户</span></span><br><span class="line"><span class="comment"># harry = harryssecret</span></span><br><span class="line"><span class="comment"># sally = sallyssecret</span></span><br><span class="line">users = users</span><br><span class="line"></span><br><span class="line"><span class="comment"># svnserve.conf中:</span></span><br><span class="line">[general]</span><br><span class="line"><span class="comment">### The anon-access and auth-access options control access to the</span></span><br><span class="line"><span class="comment">### repository for unauthenticated (a.k.a. anonymous) users and</span></span><br><span class="line"><span class="comment">### authenticated users, respectively.</span></span><br><span class="line"><span class="comment">### Valid values are "write", "read", and "none".</span></span><br><span class="line"><span class="comment">### Setting the value to "none" prohibits both reading and writing;</span></span><br><span class="line"><span class="comment">### "read" allows read-only access, and "write" allows complete</span></span><br><span class="line"><span class="comment">### read/write access to the repository.</span></span><br><span class="line"><span class="comment">### The sample settings below are the defaults and specify that anonymous</span></span><br><span class="line"><span class="comment">### users have read-only access to the repository, while authenticated</span></span><br><span class="line"><span class="comment">### users have read and write access to the repository.</span></span><br><span class="line">anon-access = none</span><br><span class="line">auth-access = write</span><br><span class="line">password-db = passwd <span class="comment">#密码配置文件</span></span><br><span class="line">authz-db = authz <span class="comment">#验证配置文件</span></span><br><span class="line">realm = svntest <span class="comment">#描述</span></span><br></pre></td></tr></table></figure>
<p>另外Linux删除用户默认密码在/root/.subversion/auth<br>
windows用totorisesvn在鼠标右键svn–&gt;setting–&gt;savedata里</p>
<h1>对顽固问题可能有用的解决方案</h1>
<p>在一个系统上编译不通过，去其他相同版本系统编译（或者不同系统交叉编译）说不定能行，曾有过云服务器编译失败，本地虚拟机编译成功复制过去还能用的经历</p>

    </section>
    <footer class="post-footer">
      <section class="author">
    <h4>flyingfisherman</h4>
    <p>欲济无舟楫，端居耻圣明，坐观垂钓者，徒有羡鱼情</p>
</section>
      <section class="share">
    <h4>Share this post</h4>
    <a class="icon-twitter" href="http://twitter.com/share?url=https://github.flyingfishman.io/mynote/2020/03/28/centos/"
       onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
        <span class="hidden">Twitter</span>
    </a>
    <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://github.flyingfishman.io/mynote/2020/03/28/centos/"
       onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
        <span class="hidden">Facebook</span>
    </a>
    <a class="icon-google-plus" href="https://plus.google.com/share?url=https://github.flyingfishman.io/mynote/2020/03/28/centos/"
       onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
        <span class="hidden">Google+</span>
    </a>
</section>
    </footer>
  </article>
  <nav class="pagination" role="pagination">
    
    <a class="newer-posts" href="/mynote/2020/05/02/lock/">
        ← 互斥锁
    </a>
    
    <span class="page-number">•</span>
    
    <a class="older-posts" href="/mynote/2020/03/20/eslint/">
        esint、prettier、jest →
    </a>
    
</nav>
  <div id="comment" class="comments-area">
    <h1 class="title"><a href="#disqus_comments" name="disqus_comments">Comments</a></h1>

    
</div>
</main>


  
<footer class="site-footer">
  
  <a class="subscribe icon-feed" href="/rss.xml"><span class="tooltip">Subscribe!</span></a>
  
  <div class="inner">
     <section class="copyright">All content copyright <a href="/mynote/">土壤细流</a> &copy; 2014 &bull; All rights reserved.</section>
     <section class="poweredby">Proudly published with <a class="icon-ghost" href="http://zespia.tw/hexo/">Hexo</a></section>
  </div>
</footer>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

<script type="text/javascript" src="/mynote/js/jquery.fitvids.js"></script>
<script type="text/javascript" src="/mynote/js/index.js"></script>






</body>
</html>
