<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  <title>vscode使用 | 土壤细流</title>
  <meta name="description" content="" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="stylesheet" type="text/css" href="/mynote/css/screen.css" />
  <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Noto+Serif:400,700,400italic|Open+Sans:700,400" />

  <meta name="generator" content="土壤细流">

  
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/rss.xml">
  
  
  <link rel="alternate" type="application/atom+xml" title="Atom 0.3" href="rss.xml">
  
  

  
</head>


<body class="post-template">

  <header class="site-head"  style="background-image: url(/mynote/image/cover.jpg)" >
    <div class="vertical">
        <div class="site-head-content inner">
             <a class="blog-logo" href="/mynote/"><img src="https://avatars.githubusercontent.com/u/26755276" alt="Blog Logo"/></a> 
            <h1 class="blog-title">土壤细流</h1>
            <h2 class="blog-description"></h2>
        </div>
    </div>
</header>
  

<main class="content" role="main">
  <article class="post">
    <span class="post-meta">
      <time datetime="2020-07-11T16:00:00.000Z" itemprop="datePublished">
          2020-07-12
      </time>
    
    
    | 
    <a href='/mynote/tags/vscode/'>vscode</a>
    
    
</span>
    <h1 class="post-title">vscode使用</h1>
    <section class="post-content">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css" /><h1>前言</h1>
<p>工具在手却不会用，或发挥不了其优点是一件很值得惭愧的事.<br>
因此决定看文档学习一下 vscode 的使用方法,弥补一下。</p>
<a id="more"></a>
<p>先贴上默认快捷键汇总</p>
<img src="/mynote/image/vscode/KeyboardReferenceSheet.png">
<h1>编辑技巧</h1>
<p>这真是很值得消化的一部分，能有效提高代码编写效率，惭愧的是我以前只会其中的一小部分</p>
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">alt+左键</td>
<td style="text-align:left">在点击处添加光标</td>
</tr>
<tr>
<td style="text-align:left">鼠标中键拖动/ctrl+shift+alt+方向键</td>
<td style="text-align:left">多行选择</td>
</tr>
<tr>
<td style="text-align:left">ctrl+shift+L</td>
<td style="text-align:left">选中所有与光标处相同的内容</td>
</tr>
<tr>
<td style="text-align:left">ctrl+D</td>
<td style="text-align:left">添加选中下一处匹配</td>
</tr>
<tr>
<td style="text-align:left">shift+alt</td>
<td style="text-align:left">鼠标拖动选择矩形区域</td>
</tr>
<tr>
<td style="text-align:left">alt</td>
<td style="text-align:left">滚轮快速滚动</td>
</tr>
<tr>
<td style="text-align:left">shift+alt+方向键上/下</td>
<td style="text-align:left">向上或下复制一行</td>
</tr>
<tr>
<td style="text-align:left">shift+alt+方向键左/右</td>
<td style="text-align:left">缩小或扩展选中区域</td>
</tr>
<tr>
<td style="text-align:left">alt+方向键上/下</td>
<td style="text-align:left">上/下移一行</td>
</tr>
<tr>
<td style="text-align:left">ctrl+shift+o</td>
<td style="text-align:left">选中文本中的标记</td>
</tr>
<tr>
<td style="text-align:left">ctrl+T</td>
<td style="text-align:left">选中工作区的标记</td>
</tr>
<tr>
<td style="text-align:left">ctrl+G</td>
<td style="text-align:left">跳至指定行</td>
</tr>
<tr>
<td style="text-align:left">ctrl+U</td>
<td style="text-align:left">光标回到上一个位置</td>
</tr>
<tr>
<td style="text-align:left">ctrl+K ctrl+X</td>
<td style="text-align:left">消除选中行末空格</td>
</tr>
<tr>
<td style="text-align:left">ctrl+shift+F</td>
<td style="text-align:left">文本格式化</td>
</tr>
<tr>
<td style="text-align:left">ctrl+K ctrl+F</td>
<td style="text-align:left">格式化当前选中区</td>
</tr>
<tr>
<td style="text-align:left">ctrl+K ctrl+0/J</td>
<td style="text-align:left">折叠或展开所有区域</td>
</tr>
<tr>
<td style="text-align:left">ctrl+K ctrl+/</td>
<td style="text-align:left">折叠所有注释</td>
</tr>
<tr>
<td style="text-align:left">ctrl+L</td>
<td style="text-align:left">选择当前行</td>
</tr>
<tr>
<td style="text-align:left">ctrl+shift+V</td>
<td style="text-align:left">打开 markdown 预览</td>
</tr>
<tr>
<td style="text-align:left">ctrl+K V</td>
<td style="text-align:left">分窗口打开 markdown 预览</td>
</tr>
<tr>
<td style="text-align:left">ctrl+W</td>
<td style="text-align:left">关闭当前文件</td>
</tr>
<tr>
<td style="text-align:left">ctrl+pagedown/pageup</td>
<td style="text-align:left">切换到下/上一文件标签</td>
</tr>
<tr>
<td style="text-align:left">ctrl+shift+K</td>
<td style="text-align:left">删除一整行</td>
</tr>
<tr>
<td style="text-align:left">ctrl+shift+space</td>
<td style="text-align:left">在函数括号处手动触发参数提示</td>
</tr>
<tr>
<td style="text-align:left">ctrl+i</td>
<td style="text-align:left">手动触发代码提示</td>
</tr>
</tbody>
</table>
<p><strong>另外一些文本编辑器中的通用快捷键</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">按键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">shift+移动光标</td>
<td style="text-align:left">选中光标移动过的节点</td>
</tr>
<tr>
<td style="text-align:left">ctrl+Home/end</td>
<td style="text-align:left">跳至文本首/尾</td>
</tr>
<tr>
<td style="text-align:left">ctrl+backspace</td>
<td style="text-align:left">退格一个单词</td>
</tr>
<tr>
<td style="text-align:left">ctrl+delete</td>
<td style="text-align:left">删除一个单词</td>
</tr>
<tr>
<td style="text-align:left">home/end</td>
<td style="text-align:left">移至行首/尾</td>
</tr>
</tbody>
</table>
<p><strong>其他</strong></p>
<p>可以通过设置 editor.rulers 来自定义竖直标尺距离</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"editor.rulers"</span>: [<span class="number">20</span>, <span class="number">40</span>, <span class="number">60</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>界面导航</h1>
<p>可以鼠标悬停在对应的位置查看到快捷键</p>
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">ctrl+,</td>
<td style="text-align:left">打开设置</td>
</tr>
<tr>
<td style="text-align:left">ctrl+shift+M/U/Y</td>
<td style="text-align:left">底部 debug 控制台等的显示隐藏选项</td>
</tr>
<tr>
<td style="text-align:left">ctrl+`</td>
<td style="text-align:left">打开终端</td>
</tr>
<tr>
<td style="text-align:left">ctrl+J</td>
<td style="text-align:left">显示，隐藏底部状态栏</td>
</tr>
<tr>
<td style="text-align:left">ctrl+shift+E/F/G/D/X</td>
<td style="text-align:left">侧栏的几个选项</td>
</tr>
<tr>
<td style="text-align:left">ctrl+K M</td>
<td style="text-align:left">切换文档语言</td>
</tr>
<tr>
<td style="text-align:left">ctrl+K ctrl+T</td>
<td style="text-align:left">切换主题</td>
</tr>
<tr>
<td style="text-align:left">ctrl+K ctrl+S</td>
<td style="text-align:left">自定键位</td>
</tr>
<tr>
<td style="text-align:left">ctrl+B</td>
<td style="text-align:left">显示，隐藏侧栏</td>
</tr>
<tr>
<td style="text-align:left">ctrl+K z</td>
<td style="text-align:left">zen 模式</td>
</tr>
<tr>
<td style="text-align:left">ctrl+\</td>
<td style="text-align:left">打开新窗口</td>
</tr>
<tr>
<td style="text-align:left">ctrl+1/2/3/4</td>
<td style="text-align:left">在不同窗口间切换</td>
</tr>
<tr>
<td style="text-align:left">ctrl+Q</td>
<td style="text-align:left">切换工具栏</td>
</tr>
<tr>
<td style="text-align:left">ctrl+P</td>
<td style="text-align:left">打开最近文件</td>
</tr>
<tr>
<td style="text-align:left">ctrl+O</td>
<td style="text-align:left">打开文件</td>
</tr>
<tr>
<td style="text-align:left">ctrl+K ctrl+O</td>
<td style="text-align:left">打开文件夹</td>
</tr>
<tr>
<td style="text-align:left">ctrl+K W</td>
<td style="text-align:left">关闭所有标签</td>
</tr>
<tr>
<td style="text-align:left">ctrl+K U</td>
<td style="text-align:left">关闭右侧</td>
</tr>
<tr>
<td style="text-align:left">ctrl+R</td>
<td style="text-align:left">重新载入</td>
</tr>
</tbody>
</table>
<p><strong>以及一些浏览器常用快捷键也可用在 vscode</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">ctrl+pgdown/pgup</td>
<td style="text-align:left">切换标签</td>
</tr>
<tr>
<td style="text-align:left">ctrl+w</td>
<td style="text-align:left">关闭标签</td>
</tr>
<tr>
<td style="text-align:left">ctrl+tab</td>
<td style="text-align:left">切换文件标签</td>
</tr>
</tbody>
</table>
<h1>配置和自定义</h1>
<h2 id="vscode-文件夹">.vscode 文件夹</h2>
<p>这个文件夹可以存放一些配置文件</p>
<h2 id="编辑配置">编辑配置</h2>
<p>由于配置太多记录一些编辑器和文件常用配置<br>
<a href="https://code.visualstudio.com/docs/getstarted/settings" target="_blank" rel="noopener">其余见官网</a><br>
<a href="https://vuejs.github.io/vetur/formatting.html#formatters" target="_blank" rel="noopener">另 vetur 的配置文档</a></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  // enter、tab是否接受代码建议</span><br><span class="line">  // - on 是</span><br><span class="line">  // - off 不是</span><br><span class="line">  // - smart enter是tab不是</span><br><span class="line">  "editor.acceptSuggestionOnEnter": "on",</span><br><span class="line">  // 分号</span><br><span class="line">  "javascript.format.semicolons": "remove",</span><br><span class="line">  // 函数括号前加空格</span><br><span class="line">  "javascript.format.insertSpaceBeforeFunctionParenthesis": true,</span><br><span class="line">  // 当词语提交时是否接受代码提示</span><br><span class="line">  // 词语提交指的是变量名或函数名写完后,输入[分号 括号]等分界符</span><br><span class="line">  "editor.acceptSuggestionOnCommitCharacter": false,</span><br><span class="line">  // 保存时的代码动作</span><br><span class="line">  "editor.codeActionOnSave": &#123;&#125;,</span><br><span class="line">  // 当文件是单文件时,是否自动检测代码缩进</span><br><span class="line">  "editor.detectIndentation": true,</span><br><span class="line">  // 粘贴,保存,输入时是否自动格式化</span><br><span class="line">  "editor.formatOnSave": true,</span><br><span class="line">  "editor.formatOnPaste": true,</span><br><span class="line">  "editor.formatOnType": true,</span><br><span class="line">  // 自动格式化时的模式</span><br><span class="line">  // - file 整个文件</span><br><span class="line">  // - modifications 修改了的地方(依赖于source control)</span><br><span class="line">  "editor.formatOnSaveMode": true,</span><br><span class="line">  // 按tab时是否自动插入空格</span><br><span class="line">  "editor.insertSpaces": true,</span><br><span class="line">  // ctrl+滚轮是否可以控制缩放</span><br><span class="line">  "editor.mouseWheelZoom": false,</span><br><span class="line">  // 多选操作的控制键</span><br><span class="line">  // - ctrlCMD ctrl</span><br><span class="line">  // - alt alt</span><br><span class="line">  "editor.multiCursorModifier": "alt",</span><br><span class="line">  // 何时显示代码提示</span><br><span class="line">  "editor.quickSuggestions": &#123;</span><br><span class="line">    "other": true,</span><br><span class="line">    "comments": false,</span><br><span class="line">    "strings": false</span><br><span class="line">  &#125;,</span><br><span class="line">  // 折叠控制键什么时候显示</span><br><span class="line">  // - mouseover 鼠标悬停时</span><br><span class="line">  // - always 总是</span><br><span class="line">  "editor.showFoldingControls": "mouseover",</span><br><span class="line">  // 建议插入模式，vscode对不同语言的这一设置，设置了不同的默认设置，因此修改需要针对各语言修改</span><br><span class="line">  // - replace 替换后面的单词</span><br><span class="line">  // - insert 插入</span><br><span class="line">  "editor.suggest.insertMode": "insert",</span><br><span class="line">  // 显示代码建议时选择哪个建议</span><br><span class="line">  "editor.suggestSelection": "recentlyUsed",</span><br><span class="line">  // 制表符空格数</span><br><span class="line">  "editor.tabSize": 4,</span><br><span class="line">  // 自动换行控制</span><br><span class="line">  // - off 从不</span><br><span class="line">  // - on 超过窗口宽度</span><br><span class="line">  // - wordWrapColumn 基于wordWrapColumn</span><br><span class="line">  // - bounded 基于最小窗口和wordWrapColumn</span><br><span class="line">  "editor.wordWrap": "off",</span><br><span class="line">  "editor.wordWrapColumn": 80,</span><br><span class="line">  // 关联语言和文件扩展</span><br><span class="line">  "files.associations": &#123;&#125;,</span><br><span class="line">  // 文件修改后自动保存</span><br><span class="line">  "files.autoSave": "off",</span><br><span class="line">  // 自动保存延时</span><br><span class="line">  "files.autoSaveDelay": 1000,</span><br><span class="line">  // 默认编码</span><br><span class="line">  "files.encoding": "utf8",</span><br><span class="line">  // 回车</span><br><span class="line">  "files.eol": "auto",</span><br><span class="line">  // 排除文件不在文件导航栏显示</span><br><span class="line">  "files.exclude": &#123;</span><br><span class="line">    "**/.git": true,</span><br><span class="line">    "**/.svn": true,</span><br><span class="line">    "**/.hg": true,</span><br><span class="line">    "**/CVS": true,</span><br><span class="line">    "**/.DS_Store": true</span><br><span class="line">  &#125;,</span><br><span class="line">  // 禅模式是否隐藏行号</span><br><span class="line">  "zenMode.hideLineNumbers": true,</span><br><span class="line">  // 禅模式是否隐藏状态栏</span><br><span class="line">  "zenMode.hideStatusBar": false,</span><br><span class="line">  // 一个子文件的文件夹像java一样采用parent/child的模式显示,而不是层级</span><br><span class="line">  "explorer.compactFolders": true,</span><br><span class="line">  // 文件导航栏是否允许拖拽</span><br><span class="line">  "explorer.enableDragAndDrop": true,</span><br><span class="line">  // 全局搜索应排除的路径</span><br><span class="line">  "search.exclude": &#123;</span><br><span class="line">    "**/node_modules": true,</span><br><span class="line">    "**/bower_components": true,</span><br><span class="line">    "**/*.code-search": true</span><br><span class="line">  &#125;,</span><br><span class="line">  // html后接新行的标签</span><br><span class="line">  "html.format.extraLiners": "head, body, /html",</span><br><span class="line">  // 属性换行</span><br><span class="line">  "html.format.wrapAttributes": "auto",</span><br><span class="line">  // 格式化时分号处理</span><br><span class="line">  // - ignore 不做任何处理</span><br><span class="line">  // - insert 表达式尾部插入分号</span><br><span class="line">  // - remove 移除不必要的分号</span><br><span class="line">  "javascript.format.semicolons": "ignore",</span><br><span class="line">  // 正确性检查的一些配置</span><br><span class="line">  "css.lint.*": "any",</span><br><span class="line">  "less.lint.*": "any",</span><br><span class="line">  "scss.lint.*": "any",</span><br><span class="line">  // 终端命令行程序</span><br><span class="line">  "terminal.integrated.shell.windows": "C:\\Windows\\System32\\cmd.exe",</span><br><span class="line">  // 环境设置</span><br><span class="line">  "terminal.integrated.env.windows": &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="对各语言进行单独配置">对各语言进行单独配置</h2>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"[javascript]"</span>: &#123;</span><br><span class="line">    // ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意: vscode 中针对语言修改配置时，带注释的 json 应选语言是 jsonc,例如 jsconfig.json、setting.json 的语言都是 jsonc.</p>
</blockquote>
<h1>全局搜索</h1>
<p><strong>文件匹配规则</strong></p>
<blockquote>
<p><code>*</code>匹配路径中一个以上字符<br>
<code>?</code>匹配路径中一个字符<br>
<code>**</code>匹配路径中任意个字符<br>
<code>{}</code>满足多种条件其一<br>
<code>[]</code>一个字符的可取值范围</p>
</blockquote>
<h1>snippets</h1>
<p>提高效率的重要功能<br>
自动完成一些重复的代码块</p>
<p>vs code 内建了一些语言的 snippets,例如:javascript,Typescript,MarkDown,和 PHP</p>
<h2 id="自定义自己的-snippets">自定义自己的 snippets</h2>
<p><strong>file</strong>&gt;<strong>preferences</strong>&gt;<strong>user snippets</strong>中选择特定的语言，可以自定义用户 snippets<br>
或者直接<code>ctrl+shift+P</code>输入<code>user snippets</code>命令。</p>
<p>可以选择<code>new global snippets file</code>创建对所有语言生效的 snippets，<br>
可以选择<code>new global snippets file for '...'</code>创建仅对当前项目生效的 snippets<br>
文件存在.vscode 中</p>
<p><strong>snippets 文件示例如下</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"For Loop"</span>: &#123;</span><br><span class="line">    // 触发关键词</span><br><span class="line">    "prefix": ["for", "for-const"],</span><br><span class="line">    // 内容，$&#123;&#125;占位符在生成代码块后可以用tab键跳转</span><br><span class="line">    "body": ["for (const $&#123;2:element&#125; of $&#123;1:array&#125;) &#123;", "\t$0", "&#125;"],</span><br><span class="line">    // 描述</span><br><span class="line">    "description": "A for loop."</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="snippets-编写规则">snippets 编写规则</h2>
<h3 id="tab-切换点-tabstops">tab 切换点(tabstops)</h3>
<p>按 tab 键会在 snippets 中的<code>$num</code>标记位置上切换，顺序从 1-10(0)，如果序号相同会有多个光标，可以同步编辑</p>
<h3 id="占位符-placeholders">占位符(placeholders)</h3>
<p>tabstops 处默认显示的内容，例如<code>snippets:${1:first}</code>,生成的代码块就默认是<code>snippets:first</code>，可以嵌套，可以使用 tab 选中占位符</p>
<h3 id="选项-choice">选项(choice)</h3>
<p><code>${1|one,two,three|}</code>可以在两个<code>|</code>符号中包括的几个内容之间进行选择的 tabstops。</p>
<h3 id="变量-Variables">变量(Variables)</h3>
<p><code>$变量名</code>或者<code>${变量名:default}</code><br>
定义好的特定的变量，若变量不存在采用 default 的内容</p>
<p>具体有哪些变量可以看官方文档 <a href="https://code.visualstudio.com/docs/editor/userdefinedsnippets#_snippet-syntax" target="_blank" rel="noopener">变量定义</a></p>
<h3 id="具体语法">具体语法</h3>
<p>以下表格中 <code>*</code>代表前一个字符或组可以重复零到多次，<code>+</code>代表前一个字符或组可以重复一到多次，<code>？</code>代表前一个字符或组可以重复零或一次，<code>[_0-9a-z]</code>代表在<code>_</code>、<code>0</code>到<code>9</code>、<code>a</code>到<code>z</code>之间取值的字符，<code>.</code>代表任何字符</p>
<table>
<thead>
<tr>
<th style="text-align:left">类型</th>
<th style="text-align:left">格式</th>
<th style="text-align:left">描述</th>
<th style="text-align:left">例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>any</code></td>
<td style="text-align:left"><code>tabstop</code> 或 <code>placeholder</code> 或 <code>choice</code> 或 <code>variable</code> 或 <code>text</code></td>
<td style="text-align:left">任何类型</td>
<td style="text-align:left">见下</td>
</tr>
<tr>
<td style="text-align:left"><code>tabstop</code></td>
<td style="text-align:left">$<code>int</code> 或 ${<code>int</code>} 或 ${<code>int</code> <code>transform</code>}</td>
<td style="text-align:left">tab 切换点</td>
<td style="text-align:left"><code>$1</code> <code>${1}</code> <code>${1/\\\\d/num/g}</code></td>
</tr>
<tr>
<td style="text-align:left"><code>choice</code></td>
<td style="text-align:left">${<code>int</code>|<code>text</code>(,<code>text</code>)*|}</td>
<td style="text-align:left">选项</td>
<td style="text-align:left"><code>${1&amp;#124;选项1,选项2,选项3&amp;#124;}</code></td>
</tr>
<tr>
<td style="text-align:left"><code>placeholder</code></td>
<td style="text-align:left">${<code>int</code>:<code>any</code>}</td>
<td style="text-align:left">占位符</td>
<td style="text-align:left">${1:ceshi}</td>
</tr>
<tr>
<td style="text-align:left"><code>variable</code></td>
<td style="text-align:left">${<code>var</code>} 或 $<code>var</code> 或 ${<code>var</code> <code>transform</code>} 或 ${<code>var</code>:<code>any</code>}</td>
<td style="text-align:left">变量</td>
<td style="text-align:left"><code>${TM_FILENAME/(.*)/_/}</code></td>
</tr>
<tr>
<td style="text-align:left"><code>transform</code></td>
<td style="text-align:left">/<code>regex</code>/(<code>format</code>|<code>text</code>)+/<code>options</code></td>
<td style="text-align:left">字符串转化规则</td>
<td style="text-align:left"><code>/.*/_/</code></td>
</tr>
<tr>
<td style="text-align:left"><code>format</code></td>
<td style="text-align:left">$<code>int</code> 或 ${<code>int</code>} 或 ${<code>int</code>:(/upcase|/downcase|/capitallize)} 或 ${<code>int</code>:+if 语句} 或 ${<code>int</code>:?if 语句:else 语句} 或 ${<code>int</code>:-else 语句} 或 ${<code>int</code>:else 语句}</td>
<td style="text-align:left">用来替换匹配到的字符串的替换模式</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left"><code>text</code></td>
<td style="text-align:left">.*</td>
<td style="text-align:left">任何字符串</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left"><code>int</code></td>
<td style="text-align:left">[0-9]+</td>
<td style="text-align:left">任何数字</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left"><code>var</code></td>
<td style="text-align:left">[a-zA-Z][a-zA-Z0-9]*</td>
<td style="text-align:left">任何合规变量名</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left"><code>regex</code></td>
<td style="text-align:left"></td>
<td style="text-align:left">任何合 js 规范的正则表达式值</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left"><code>options</code></td>
<td style="text-align:left"></td>
<td style="text-align:left">任何合 js 规范的正则表达式选项</td>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<h3 id="举例">举例</h3>
<h1>emmet</h1>
<p>提高效率的重要功能<br>
默认对<code>html</code>,<code>haml</code>,<code>pug</code>,<code>slim</code>,<code>jsx</code>,<code>xml</code>,<code>xsl</code>,<code>css</code>,<code>scss</code>,<code>sass</code>和<code>stylus</code>等类型语言以及上述类型语言的扩展语言有效。</p>
<p>可以通过一定格式的缩写来编写标记语法、样式等。</p>
<h2 id="相关配置">相关配置</h2>
<p><a href="https://code.visualstudio.com/docs/editor/emmet" target="_blank" rel="noopener">其余配置见官方文档</a></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  // 是否启用tab快捷键转化emmet缩略语</span><br><span class="line">  "emmet.triggerExpansionOnTab": true,</span><br><span class="line">  // 不显示缩略语预览</span><br><span class="line">  "emmet.showExpansionAbbreviation": "never",</span><br><span class="line">  // 仅在html/css文件中显示emmet提示</span><br><span class="line">  "emmet.showExpandedAbbreviation": "inMarkupAndStylesheetFilesOnly",</span><br><span class="line">  // 设置缩略语预览的位置</span><br><span class="line">  "emmet.showSuggestionAsSnippets": true,</span><br><span class="line">  "editor.snippetSuggestions": "top",</span><br><span class="line">  // 在不同的文件类型中启用缩略语,如下默认js不支持emmet,键名和键值都应当是vscode支持的语言类型</span><br><span class="line">  "emmet.includeLanguages": &#123;</span><br><span class="line">    "javascript": "javascriptreact"</span><br><span class="line">  &#125;,</span><br><span class="line">  "emmet.preferences": &#123;</span><br><span class="line">    // 样式的浏览器前缀</span><br><span class="line">    // 这两个属性才加前缀</span><br><span class="line">    "css.webkitProperties": "border-right,animation",</span><br><span class="line">    // 都不加前缀</span><br><span class="line">    "css.mozProperties": "",</span><br><span class="line">    // 采取默认情况</span><br><span class="line">    "css.oProperties": null,</span><br><span class="line">    "css.msProperties": null</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="过滤器">过滤器</h2>
<p>过滤器在缩略语生成代码前对代码进行进一步处理</p>
<h3 id="两种添加方法">两种添加方法</h3>
<p>配置文件中添加语言对应的 emmet 过滤器</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"emmet.syntaxProfiles"</span>: &#123;</span><br><span class="line">    <span class="attr">"html"</span>: &#123;</span><br><span class="line">      <span class="attr">"filters"</span>: <span class="string">"bem"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>直接在缩略语后通过<code>|</code>符号传递给过滤器，例如<code>div#page&gt;li|c</code>使用了注释过滤器.</p>
<h2 id="自定义-emmet-片段">自定义 emmet 片段</h2>
<p>用户可以自定义 emmet 片段</p>
<blockquote>
<p>这里的自定义只能自定义snippets，其他方面如语法的自定义不知道如何配置，本来我以为能实现在js能像html中一样，写<code>parent&gt;children</code>扩展成<code>{parent:{children:{}}</code>之类的。</p>
</blockquote>
<p>首先需要设置<code>emmet.extensionsPath</code>为你放置自定义代码片段的<strong>文件夹路径</strong>。<br>
修改这一配置后据文档中说需要重启 vscode，但我试了不用重启，可能是版本问题，修改后无效应试着重启一下<br>
然后在文件夹中创建<code>snippets.json</code>。</p>
<blockquote>
<p>注意：window 下<code>emmet.extensionsPath</code>路径的格式也应当是<code>/</code>分隔的<strong>绝对路径</strong>，否则不起作用，至少对我是这样，网上不知道为有些博客明明没用的配置也写出来误人子弟。<br>
另外 markdown 似乎无法启用 emmet<br>
若 js 之类的语言以如下方式启用了 emmet</p>
</blockquote>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"emmet.includeLanguages"</span>: &#123;</span><br><span class="line">    <span class="attr">"javascript"</span>: <span class="string">"javascriptreact"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>仍需修改 html 对应的 snippets 而不是 javascriptreact 的，似乎是因为javascriptreact继承自html emmet语法</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  // 无效</span><br><span class="line">  "javascriptreact": &#123;</span><br><span class="line">    "snippets": &#123;</span><br><span class="line">      "test": "doesn't work"</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  // 生效</span><br><span class="line">  "html": &#123;</span><br><span class="line">    "snippets": &#123;</span><br><span class="line">      "html_test": "work"</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a href="https://github.com/microsoft/vscode/issues/109381" target="_blank" rel="noopener">具体参见此处</a></p>
<p>配置举例如下</p>
<p><strong>setting.json</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"emmet.extensionsPath"</span>: <span class="string">"/D:/project/emmet/"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>snippets.json</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"html"</span>: &#123;</span><br><span class="line">    <span class="attr">"snippets"</span>: &#123;</span><br><span class="line">      <span class="attr">"ull"</span>: <span class="string">"&lt;ul&gt;&lt;li&gt;&lt;/li&gt;&lt;li&gt;&lt;/li&gt;&lt;/ul&gt;"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a href="https://docs.emmet.io/customization/" target="_blank" rel="noopener">emmet 文档</a>,可以了解怎么编写 emmet 片段<br>
<a href="https://code.visualstudio.com/docs/editor/emmet" target="_blank" rel="noopener">vscode 文档</a></p>
<h1>jsconfig.json</h1>
<p>用来指示当前文件夹为项目根目录<br>
<a href="https://code.visualstudio.com/docs/languages/jsconfig" target="_blank" rel="noopener">官方文档</a><br>
不配置此文件时，单个文件以及其引用的依赖被视为一个整体，配置后，<code>include</code>包含的文件拥有相同的项目上下文，整个项目被视为一个整体，好处在于，代码提示中可以看到同项目其他文件中定义的模块，并且使用其他文件定义的模块时可以自动导入等等。。。</p>
<h2 id="配置">配置</h2>
<p>可以用来配合 webpack 的路径别名</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"compilerOptions"</span>: &#123;</span><br><span class="line">    // 设置path必须要设置baseurl,</span><br><span class="line">    "baseUrl": ".",</span><br><span class="line">    "paths": &#123;</span><br><span class="line">      "@/*": ["./src/*"]</span><br><span class="line">    &#125;,</span><br><span class="line">    // 支持.jsx扩展名的文件</span><br><span class="line">    // 可惜没有支持,vue扩展名的配置</span><br><span class="line">    "jsx": "react"</span><br><span class="line">  &#125;,</span><br><span class="line">  "include": ["src/**/*"]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>类型检查</h1>
<p>可以把 typescript 的一些类型检查的特点使用在 javascript 中</p>
<h2 id="启用">启用</h2>
<p><strong>单文件中使用注释启用</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 启用</span></span><br><span class="line"><span class="comment">// @ts-check</span></span><br><span class="line"><span class="comment">// 忽略某一部分的错误</span></span><br><span class="line"><span class="comment">// @ts-ignore</span></span><br><span class="line"><span class="comment">// 不检查当前文件</span></span><br><span class="line"><span class="comment">// @ts-nocheck</span></span><br></pre></td></tr></table></figure>
<p><strong>项目中配置</strong></p>
<p>可以在<code>setting.json</code>中设置<code>&quot;javascript.implicitProjectConfig.Checjs&quot;:true</code>来启用,也可以在<code>jsconfig.json</code>中设置<code>&quot;Checkjs&quot;:true</code>来控制</p>
<h2 id="补充">补充</h2>
<p>可能会导致一些原本正确的代码由于不符合 typescript 规范而报错</p>
<h1>代码导航</h1>
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">f12</td>
<td style="text-align:left">转到定义</td>
</tr>
<tr>
<td style="text-align:left">alt+f12</td>
<td style="text-align:left">在分窗口打开定义</td>
</tr>
<tr>
<td style="text-align:left">shift+f12</td>
<td style="text-align:left">转到引用</td>
</tr>
</tbody>
</table>
<h1>debug</h1>
<h2 id="launch-json">launch.json</h2>
<p><code>ctrl+shift+D</code>打开 debug 栏，点击上方设置的图标创建<code>launch.json</code>，有两种模式<code>launch</code>模式和<code>attach</code>模式，分别是直接启动，和绑定已启动程序。</p>
<p>在<code>launch.json</code>中,通过右下角的<code>add configuration</code>按钮来添加启动设置。</p>
<p>可以在<code>launch.json</code>中设置<code>stopOnEntry: true</code>,使调试器停止在开头处。</p>
<p><a href="https://code.visualstudio.com/docs/editor/debugging#_launchjson-attributes" target="_blank" rel="noopener">配置文件属性</a></p>
<h2 id="启动">启动</h2>
<p>点击 debug 栏最上方的启动下拉列表中的一项，启动 debug。<br>
也可在配置<code>launch.json</code>后<code>f5</code>启动</p>
<h2 id="断点">断点</h2>
<p>在行号左侧可以设置左击断点，右击选择设置断点、条件断点、输出点<br>
断点处右击可以编辑断点，将其设置为输出点、条件断点、或者设置断点命中次数。<br>
也可在代码行按<code>f9</code>设置或取消断点。</p>
<ol>
<li>运行至输出点时会在在 debug 控制台输出该点表达式中的内容。</li>
<li>条件断点只有断点处设置的表达式为真时，才会被命中到</li>
<li>断点命中次数设置为<code>=n</code>后，只有断点第 n 次命中才会中断一次，<code>&gt;n</code>则是第 n 次命中以后都会中断，依次类推其他表达式的情况</li>
</ol>
<h3 id="断点无效">断点无效</h3>
<p>可能是本地的运行环境和当前版本 vscode 默认的调试环境版本不匹配。</p>
<p><a href="https://www.jianshu.com/p/91980de221da" target="_blank" rel="noopener">见此处</a></p>
<p><code>nodejs</code>调试添加<code>&quot;runtimeVersion&quot;: &quot;版本号&quot;</code>，这一配置需要本地安装了<code>nvm-windows</code>，配置完后需要<code>nvm use 你配置的版本号</code>（没安装对应版本需要先用 nvm 安装），即可正常使用。</p>
<h2 id="调试">调试</h2>
<p><code>f5</code>继续或暂停，<code>ctrl+shift+f5</code>重启，<code>shift+f5</code>终止，<code>f10</code>下一步，<code>f11</code>跳入，<code>shift+f11</code>跳出。</p>
<h1>任务</h1>
<p><a href="https://code.visualstudio.com/docs/editor/tasks" target="_blank" rel="noopener">官网地址</a></p>
<p><code>ctrl+shift+p</code>输入 task，选择<code>configure task</code>可以配至 task 文件。<br>
<code>ctrl+shift+b</code>运行 build task<br>
菜单栏<strong>terminal</strong>&gt;**Run Task…**选择要运行的命令。</p>
<h2 id="主要配置说明">主要配置说明</h2>
<table>
<thead>
<tr>
<th style="text-align:left">属性</th>
<th style="text-align:left">类型</th>
<th style="text-align:left">作用</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>label</code></td>
<td style="text-align:left"><code>String</code></td>
<td style="text-align:left">任务标签</td>
</tr>
<tr>
<td style="text-align:left"><code>type</code></td>
<td style="text-align:left"><code>String</code></td>
<td style="text-align:left">任务类型</td>
</tr>
<tr>
<td style="text-align:left"><code>command</code></td>
<td style="text-align:left"><code>String</code></td>
<td style="text-align:left">任务指令</td>
</tr>
<tr>
<td style="text-align:left"><code>windows</code></td>
<td style="text-align:left"><code>Object</code></td>
<td style="text-align:left">windows 系统下的替代配置</td>
</tr>
<tr>
<td style="text-align:left"><code>group</code></td>
<td style="text-align:left"><code>String</code></td>
<td style="text-align:left">所属的组，建议设为 build，因为只有 build 设置了默认快捷键<code>ctrl+shift+B</code>，设为 test 需要定义一下<code>run test task</code>的快捷键，设为其他值的话就得输入<code>alt+T R</code>打开<code>run task</code>在选择自己的 task</td>
</tr>
<tr>
<td style="text-align:left"><code>presentation</code></td>
<td style="text-align:left"><code>Object</code></td>
<td style="text-align:left">任务输出如何显示</td>
</tr>
<tr>
<td style="text-align:left"><code>options</code></td>
<td style="text-align:left"><code>Object</code></td>
<td style="text-align:left">环境相关(<code>CWD</code>,<code>ENV</code>,<code>SHELL</code>)的附加命令</td>
</tr>
<tr>
<td style="text-align:left"><code>args</code></td>
<td style="text-align:left"><code>Object&amp;#124;Array</code></td>
<td style="text-align:left">命令行参数</td>
</tr>
<tr>
<td style="text-align:left"><code>problemMatcher</code></td>
<td style="text-align:left"><code>Array</code></td>
<td style="text-align:left">对任务输出进行预处理使其有高亮显示等</td>
</tr>
</tbody>
</table>
<p>官网上说可以按<code>ctrl+space</code>打开代码提示查看所欲属性，然而我没修改配置，<code>ctrl+space</code>却无效，<code>ctrl+i</code>才有效。</p>
<p>对于带空格或特殊符号的单个参数或指令，如带空格的路径等，默认会加上引号，cmd.exe 下是双引号，其他是单引号。</p>
<p>可以通过配置来控制单双引号，</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"label"</span>: <span class="string">"dir"</span>,</span><br><span class="line">  <span class="attr">"type"</span>: <span class="string">"shell"</span>,</span><br><span class="line">  <span class="attr">"command"</span>: <span class="string">"dir"</span>,</span><br><span class="line">  <span class="attr">"args"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"value"</span>: <span class="string">"folder with spaces"</span>,</span><br><span class="line">      <span class="attr">"quoting"</span>: <span class="string">"escape"</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其中 <code>quoting</code>取值为 <code>escape</code> <code>strong</code> 或 <code>weak</code>，escape 是使用转移字符代替空格，strong 就是上文提到的默认行为，weak 都是双引号。</p>
<h2 id="presentation-可选配置">presentation 可选配置</h2>
<p><strong>reveal</strong>: 是否执行任务时是否将终端打开并置顶。</p>
<pre><code>. *always* 总是打开并置顶
. *never* 用户必须手动打开只能高端
. *silent* 只有报错或警报时打开
</code></pre>
<p><strong>focus</strong> 终端是否获得焦点<br>
<strong>echo</strong> 是否回显任务执行结果</p>
<h2 id="可使用的变量">可使用的变量</h2>
<p>[官网地址]](<a href="https://code.visualstudio.com/docs/editor/variables-reference" target="_blank" rel="noopener">https://code.visualstudio.com/docs/editor/variables-reference</a>)</p>
<p>常用的一个是环境变量格式是<code>${env:你要使用的变量名}</code></p>
<blockquote>
<p>注意: 在 options 中定义的环境变量，只会传递到要执行的程序中，无法用于 command,args 等属性上</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  // ...</span><br><span class="line">  "options": &#123;</span><br><span class="line">    "env": &#123;</span><br><span class="line">      "MY_VARIABLE": "$&#123;env:MY_VARIABLE&#125;/value"</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  "type": "progress",</span><br><span class="line">  // 以下配置实际结果为/main.exe</span><br><span class="line">  "command": "$&#123;env:MY_VARIABLE&#125;/main.exe",</span><br><span class="line">  // 同上</span><br><span class="line">  "command": "%MY_VARIABLE%/main.exe"</span><br><span class="line">  // ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>如下设置则可</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  // ...</span><br><span class="line">  "options": &#123;</span><br><span class="line">    "env": &#123;</span><br><span class="line">      "MY_VARIABLE": "$&#123;env:MY_VARIABLE&#125;/value"</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  "type": "shell",</span><br><span class="line">  // 以下配置符合预期</span><br><span class="line">  "command": "%MY_VARIABLE%/main.exe"</span><br><span class="line">  // ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>因为 type 为 shell 的任务，是通过<code>cmd /c</code>执行的，环境变量已被传递到 cmd.exe 中</p>
<h2 id="复合指令">复合指令</h2>
<p>任务可以依赖其他任务，被依赖的任务会在依赖他们的任务之前执行，只需要设置 <code>dependsOn</code>即可，<code>dependsOn</code>为字符串数组，字符串中是其他任务的 label 值。</p>
<h2 id="示例：c-语言的编译任务和调试">示例：c 语言的编译任务和调试</h2>
<p>环境是 windows 首先下载编译工具，mingw64<br>
<a href="https://sourceforge.net/projects/mingw-w64/files/mingw-w64/mingw-w64-snapshot/" target="_blank" rel="noopener">下载地址</a></p>
<p>选择其中 mingw-w64 gcc 的任意一个版本</p>
<p><a href="https://www.pcyo.cn/linux/20181212/216.html" target="_blank" rel="noopener">不同版本的区别</a></p>
<p>接下来安装 vscode 的<code>c/c++</code>拓展</p>
<p>下载好后解压，自行配置环境变量，再在 vscode 里如下配置</p>
<p>事实上设置了环境变量<code>MINGW_HOME</code>后不做如下配置也可以，经测试，c/c++插件能自动检测这个变量，不过若是在 vscode 启动后修改了环境变量，需要把 vscode 关了重启修改才会生效。</p>
<p>路径分隔符可以是<code>/</code>也可以是<code>\\</code></p>
<p><strong>setting.json</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"C_Cpp.default.includePath"</span>: [</span><br><span class="line">    // 头文件默认引入位置，MINGW_HOME是自定义的环境变量</span><br><span class="line">    <span class="string">"$&#123;env:MINGW_HOME&#125;/**"</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可以不配置<code>c_cpp_properties.json</code>，采用默认配置，但如若配置了<code>c_cpp_properties.json</code>并且配置了<code>includePath</code>，需要在<code>includePath</code>数组中加入<code>${default}</code>代表在 setting.json 中配置的默认头文件引入位置。</p>
<p>然后用复合指令编译生成可执行文件，<code>ctrl+shift+p</code>后输入 tasks 选择<code>configure task</code>，会生成配置模板。<br>
<strong>tasks.json</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"tasks"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"label"</span>: <span class="string">"prepare"</span>,</span><br><span class="line">      <span class="attr">"type"</span>: <span class="string">"shell"</span>,</span><br><span class="line">      // 生成debug目录</span><br><span class="line">      "command": "if not exist debug (mkdir debug)",</span><br><span class="line">      "presentation": &#123;</span><br><span class="line">        "echo": true,</span><br><span class="line">        "reveal": "silent",</span><br><span class="line">        "focus": false,</span><br><span class="line">        "panel": "shared",</span><br><span class="line">        "showReuseMessage": true,</span><br><span class="line">        "clear": false</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"label"</span>: <span class="string">"build test"</span>,</span><br><span class="line">      <span class="attr">"type"</span>: <span class="string">"shell"</span>,</span><br><span class="line">      <span class="attr">"command"</span>: <span class="string">"gcc"</span>,</span><br><span class="line">      <span class="attr">"args"</span>: [</span><br><span class="line">        // 你自己需要编译的文件</span><br><span class="line">        // 此处$&#123;file&#125;为vscode替换变量，指代打开的文件</span><br><span class="line">        "$&#123;file&#125;",</span><br><span class="line">        "-o",</span><br><span class="line">        // $&#123;fileBasename&#125;当前打开的文件去掉扩展名</span><br><span class="line">        "debug/$&#123;fileBasenameNoExtension&#125;.exe",</span><br><span class="line">        // 包含调试信息</span><br><span class="line">        <span class="string">"-g"</span></span><br><span class="line">      ],</span><br><span class="line">      "group": "build",</span><br><span class="line">      "presentation": &#123;</span><br><span class="line">        "reveal": "silent"</span><br><span class="line">      &#125;,</span><br><span class="line">      "problemMatcher": "$msCompile",</span><br><span class="line">      "dependsOn": ["prepare"]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>配置启动文件，<code>ctrl+shift+d</code>打开 debug 界面，左上角的设置按钮可以新建<code>launch.json</code>文件。或者<code>ctrl+shift+p</code>再输入 launch 可以找到 open launch json 命令。在 launch.json 文件右下角有 add configuration 按钮，点击后选择<code>（gdb）启动</code>模板。</p>
<p>修改可执行文件及 gdb 的路径，再添加 prelaunchTask 选项设置为配置好的编译命令即可。</p>
<p><strong>launch.json</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  // Use IntelliSense to learn about possible attributes.</span><br><span class="line">  // Hover to view descriptions of existing attributes.</span><br><span class="line">  // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387</span><br><span class="line">  "version": "0.2.0",</span><br><span class="line">  "configurations": [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"name"</span>: <span class="string">"(gdb) 启动"</span>,</span><br><span class="line">      <span class="attr">"type"</span>: <span class="string">"cppdbg"</span>,</span><br><span class="line">      <span class="attr">"request"</span>: <span class="string">"launch"</span>,</span><br><span class="line">      <span class="attr">"program"</span>: <span class="string">"$&#123;workspaceFolder&#125;/debug/$&#123;fileBasenameNoExtension&#125;.exe"</span>,</span><br><span class="line">      <span class="attr">"args"</span>: [],</span><br><span class="line">      <span class="attr">"stopAtEntry"</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">"cwd"</span>: <span class="string">"$&#123;workspaceFolder&#125;"</span>,</span><br><span class="line">      <span class="attr">"environment"</span>: [],</span><br><span class="line">      <span class="attr">"externalConsole"</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">"MIMode"</span>: <span class="string">"gdb"</span>,</span><br><span class="line">      // 自己的Mingw路径，两种路径分隔符都可</span><br><span class="line">      "miDebuggerPath": "D:\\environment\\mingw64\\bin\\gdb.exe",</span><br><span class="line">      "setupCommands": [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">"description"</span>: <span class="string">"为 gdb 启用整齐打印"</span>,</span><br><span class="line">          <span class="attr">"text"</span>: <span class="string">"-enable-pretty-printing"</span>,</span><br><span class="line">          <span class="attr">"ignoreFailures"</span>: <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      "preLaunchTask": "build test"</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意 如果有多个不同的启动配置，记得看 debug 窗口最上面的默认启动配置是不是你需要的那个，我因为忘了看发现不符合预期浪费了蛮多时间。</p>
</blockquote>

    </section>
    <footer class="post-footer">
      <section class="author">
    <h4>flyingfisherman</h4>
    <p>前端工程师，热爱技术，坚信知识技术改变生活。最高兴的场合莫过于学到的技术为自己、亲友或他人提供了些许的便利、帮助。</p>
</section>
      <section class="share">
    <h4>Share this post</h4>
    <a class="icon-twitter" href="http://twitter.com/share?url=https://github.flyingfishman.io/mynote/2020/07/12/vscode/"
       onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
        <span class="hidden">Twitter</span>
    </a>
    <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://github.flyingfishman.io/mynote/2020/07/12/vscode/"
       onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
        <span class="hidden">Facebook</span>
    </a>
    <a class="icon-google-plus" href="https://plus.google.com/share?url=https://github.flyingfishman.io/mynote/2020/07/12/vscode/"
       onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
        <span class="hidden">Google+</span>
    </a>
</section>
    </footer>
  </article>
  <nav class="pagination" role="pagination">
    
    <a class="newer-posts" href="/mynote/2020/08/08/record/">
        ← rainmeter皮肤google翻译工具编写
    </a>
    
    <span class="page-number">•</span>
    
    <a class="older-posts" href="/mynote/2020/05/02/lock/">
        互斥锁 →
    </a>
    
</nav>
  <div id="comment" class="comments-area">
    <h1 class="title"><a href="#disqus_comments" name="disqus_comments">Comments</a></h1>

    
</div>
</main>


  
<footer class="site-footer">
  
  <a class="subscribe icon-feed" href="/rss.xml"><span class="tooltip">Subscribe!</span></a>
  
  <div class="inner">
     <section class="copyright">All content copyright <a href="/mynote/">土壤细流</a> &copy; 2014 &bull; All rights reserved.</section>
     <section class="poweredby">Proudly published with <a class="icon-ghost" href="http://zespia.tw/hexo/">Hexo</a></section>
  </div>
</footer>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

<script type="text/javascript" src="/mynote/js/jquery.fitvids.js"></script>
<script type="text/javascript" src="/mynote/js/index.js"></script>






</body>
</html>
